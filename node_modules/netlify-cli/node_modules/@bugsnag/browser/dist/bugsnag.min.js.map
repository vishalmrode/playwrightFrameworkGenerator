{"version":3,"sources":["../../node_modules/browser-pack-flat/_prelude","../core/lib/breadcrumb-types.js","../core/lib/es-utils/reduce.js","../core/lib/es-utils/filter.js","../core/lib/es-utils/includes.js","../core/lib/es-utils/is-array.js","../core/lib/es-utils/keys.js","../core/lib/validators/int-range.js","../core/lib/validators/list-of-functions.js","../core/lib/validators/string-with-length.js","../core/config.js","../core/lib/es-utils/assign.js","../core/lib/es-utils/map.js","src/config.js","../core/breadcrumb.js","../../node_modules/stackframe/stackframe.js","../../node_modules/stack-generator/stack-generator.js","../../node_modules/error-stack-parser/error-stack-parser.js","../core/lib/error-stack-parser.js","../../node_modules/@bugsnag/safe-json-stringify/index.js","../core/lib/feature-flag-delegate.js","../core/lib/has-stack.js","../core/lib/iserror.js","../../node_modules/iserror/index.js","../core/lib/metadata-delegate.js","../core/event.js","../core/lib/sync-callback-runner.js","../../node_modules/@bugsnag/cuid/lib/pad.js","../../node_modules/@bugsnag/cuid/lib/fingerprint.browser.js","../../node_modules/@bugsnag/cuid/index.js","../../node_modules/@bugsnag/cuid/lib/is-cuid.js","../core/session.js","../core/client.js","../core/lib/callback-runner.js","../core/lib/async-every.js","../core/lib/json-payload.js","../delivery-x-domain-request/delivery.js","../delivery-xml-http-request/delivery.js","../plugin-app-duration/app.js","../plugin-browser-device/device.js","../plugin-browser-session/session.js","../plugin-client-ip/client-ip.js","../plugin-console-breadcrumbs/console-breadcrumbs.js","../plugin-inline-script-content/inline-script-content.js","../plugin-interaction-breadcrumbs/interaction-breadcrumbs.js","../plugin-navigation-breadcrumbs/navigation-breadcrumbs.js","../plugin-network-breadcrumbs/network-breadcrumbs.js","../plugin-simple-throttle/throttle.js","../plugin-strip-query-string/strip-query-string.js","../plugin-window-onerror/onerror.js","../plugin-window-unhandled-rejection/unhandled-rejection.js","src/notifier.js","../plugin-browser-context/context.js","../plugin-browser-request/request.js","../../node_modules/browser-pack-flat/_postlude"],"names":["f","exports","module","define","amd","window","global","self","this","Bugsnag","_$breadcrumbTypes_17","_$reduce_26","arr","fn","accum","val","i","len","length","_$filter_21","item","concat","_$includes_22","x","_$isArray_23","obj","Object","prototype","toString","call","_hasDontEnumBug","propertyIsEnumerable","_dontEnums","_$keys_24","prop","result","hasOwnProperty","push","_$intRange_33","min","max","Infinity","value","parseInt","_$listOfFunctions_34","_$stringWithLength_35","_$config_14","schema","apiKey","defaultValue","message","validate","appVersion","undefined","appType","autoDetectErrors","enabledErrorTypes","unhandledExceptions","unhandledRejections","allowPartialObject","providedKeys","defaultKeys","k","onError","onSession","onBreadcrumb","endpoints","notify","sessions","autoTrackSessions","enabledReleaseStages","releaseStage","maxBreadcrumbs","enabledBreadcrumbTypes","join","maybeType","context","user","key","metadata","logger","method","redactedKeys","s","test","plugins","p","load","featureFlags","feature","name","reportUnhandledPromiseRejectionsAsHandled","sendPayloadChecksums","_$assign_20","target","arguments","source","_$map_25","_$config_10","location","host","_extends","console","debug","getPrefixedConsole","consoleLog","log","consoleMethod","bind","_$Breadcrumb_12","Breadcrumb","type","timestamp","Date","toJSON","metaData","root","factory","_$stackframe_9","StackFrame","_capitalize","str","charAt","toUpperCase","substring","_getter","booleanProps","numericProps","stringProps","props","getArgs","args","setArgs","v","TypeError","getEvalOrigin","evalOrigin","setEvalOrigin","fileName","getFileName","lineNumber","getLineNumber","columnNumber","getColumnNumber","functionName","getFunctionName","getIsEval","fromString","argsStartIndex","indexOf","argsEndIndex","lastIndexOf","split","locationString","parts","exec","Boolean","j","n","isNaN","parseFloat","isFinite","Number","String","_$stackGenerator_8","StackGenerator","backtrace","opts","stack","maxStackSize","curr","callee","Array","RegExp","$1","caller","e","_$errorStackParser_6","ErrorStackParser","FIREFOX_SAFARI_STACK_REGEXP","CHROME_IE_STACK_REGEXP","SAFARI_NATIVE_CODE_REGEXP","parse","error","stacktrace","parseOpera","match","parseV8OrIE","parseFFOrSafari","Error","extractLocation","urlLike","replace","filter","line","map","sanitizedLine","tokens","slice","locationParts","pop","functionNameRegex","matches","parseOpera9","parseOpera11","parseOpera10","lineRE","lines","argsRaw","functionCall","shift","_$errorStackParser_19","_$safeJsonStringify_5","data","replacer","space","redactedPaths","JSON","stringify","seen","edges","visit","path","edgesExceeded","MIN_PRESERVED_DEPTH","MAX_EDGES","MAX_DEPTH","REPLACEMENT_NODE","haystack","needle","find","fResult","err","throwsMessage","er","o","eResult","__isArray_5","aResult","isDescendent","shouldRedact","safelyGetProp","prepareObjForSerialization","paths","patterns","toLowerCase","add","existingFeatures","existingFeatureKeys","variant","existingIndex","_$featureFlagDelegate_27","clear","features","featuresIndex","merge","newFeatures","toEventApi","_ref","flag","featureFlag","_$hasStack_28","_$iserror_29","__clear_31","state","section","_$metadataDelegate_31","keyOrObj","maybeVal","_updates","updates","get","Event","errorClass","errorMessage","handledState","originalError","defaultHandledState","groupingHash","_handledState","severity","unhandled","app","device","request","breadcrumbs","threads","_metadata","_features","_featuresIndex","_user","_session","_correlation","errors","createBugsnagError","__type","_proto","addMetadata","setTraceCorrelation","traceId","spanId","___extends_15","getMetadata","clearMetadata","addFeatureFlag","addFeatureFlags","getFeatureFlags","clearFeatureFlag","clearFeatureFlags","getUser","setUser","id","email","payloadVersion","exceptions","severityReason","session","correlation","formatStackframe","frame","file","normaliseFunctionName","code","inProject","ensureString","getStacktrace","errorFramesToSkip","backtraceFramesToSkip","create","maybeError","tolerateNonErrors","component","event","_normaliseError","normaliseError","internalFrames","makeSerialisable","cause","_event$errors","causes","getCauseStack","normalisedCauses","apply","createAndLogInputError","reason","verb","warn","hasNecessaryFields","_$Event_15","_$syncCallbackRunner_32","callbacks","callbackArg","callbackType","ignore","cbs","_$pad_4","num","size","substr","env","globalCount","mimeTypesLength","navigator","mimeTypes","clientId","userAgent","_$fingerprint_2","c","blockSize","base","discreteValues","Math","pow","randomBlock","random","cuid","getTime","fingerprint","isCuid","_$cuid_1","_$Session_36","Session","startedAt","_handled","_unhandled","events","handled","_track","__add_13","__clear_13","__merge_13","noop","Client","configuration","internalPlugins","notifier","_this","_notifier","_config","_schema","_delivery","sendSession","sendEvent","_logger","info","_plugins","_breadcrumbs","_context","_cbs","sp","b","_configure","pl","_loadPlugin","_depth","getContext","setContext","plugin","configSchema","_reduce","config","startsWith","generateConfigErrorMessage","getPlugin","_setDelivery","d","startSession","version","_sessionDelegate","addOnError","front","removeOnError","_addOnSessionPayload","addOnSession","removeOnSession","addOnBreadcrumb","removeOnBreadcrumb","pauseSession","resumeSession","leaveBreadcrumb","crumb","_isBreadcrumbTypeEnabled","types","postReportCallback","_notify","_this2","originalSeverity","onCallbackError","cb","index","next","_$asyncEvery_16","ret","then","setTimeout","_$callbackRunner_18","shouldSend","unhandledOverridden","rawInput","_$Client_13","EVENT_REDACTION_PATHS","_$jsonPayload_30","payload","_$delivery_37","client","win","url","getApiUrl","body","req","XDomainRequest","onload","onerror","toFixed","open","send","endpoint","isoDate","matchPageProtocol","protocol","encodeURIComponent","_matchPageProtocol","pageProtocol","getIntegrityHeaderValue","windowOrWorkerGlobalScope","requestBody","isSecureContext","crypto","subtle","digest","TextEncoder","msgUint8","encode","hashBuffer","from","Uint8Array","padStart","Promise","resolve","_$delivery_38","XMLHttpRequest","onreadystatechange","readyState","DONE","status","_err","setRequestHeader","toISOString","integrity","_err2","appStart","reset","_$app_39","now","duration","_$device_41","nav","locale","browserLanguage","systemLanguage","userLanguage","language","screen","orientation","document","documentElement","clientWidth","clientHeight","generateAnonymousId","storage","localStorage","getItem","setItem","getDeviceId","collectUserIp","setDefaultUserId","time","eventOrSession","_$session_43","sessionDelegate","sessionClient","_pausedSession","_$clientIp_44","clientIp","CONSOLE_LOG_METHODS","original","_len","_key","arg","stringified","_restore","_$inlineScriptContent_46","doc","trackInlineScripts","originalLocation","href","html","DOMContentLoaded","attachEvent","getHtml","outerHTML","prev","_lastScript","updateLastScript","script","getCurrentScript","currentScript","scripts","getElementsByTagName","cleanUrl","content","innerHTML","htmlLines","zeroBasedLine","start","end","addSurroundingCode","_setTimeout","__proxy","__traceOriginalScript","eventTargetCallbackAccessor","callbackAccessor","alsoCallOriginal","cba","__trace__","replacement","isEventHandlerObj","handleEvent","_$interactionBreadcrumbs_47","addEventListener","targetText","targetSelector","el","text","textContent","innerText","trim","getNodeText","getNodeSelector","tagName","className","querySelectorAll","parentNode","childNodes","_$navigationBreadcrumbs_48","drop","oldURL","relativeLocation","to","newURL","getCurrentState","history","pushState","wrapHistoryFn","replaceState","a","createElement","pathname","search","hash","resetEventCount","orig","title","currentPath","prevState","stateChangeToMetadata","BREADCRUMB_TYPE","_$networkBreadcrumbs_49","_ignoredUrls","ignoredUrls","trackedRequests","WeakMap","requestHandlers","originalOpen","set","originalSend","requestData","listeners","removeEventListener","requestStart","getDuration","handleXHRLoad","monkeyPatchXMLHttpRequest","fetch","polyfill","oldFetch","_arguments","urlOrRequest","options","reject","response","handleFetchSuccess","handleFetchError","monkeyPatchFetch","startTime","_$throttle_50","maxEvents","strip","_$stripQueryString_51","allFrames","_strip","decorateStack","lineNo","charNo","culprit","isActualNumber","errorCharacter","fixBluebirdStacktrace","__schema_11","_client","createClient","_$request_42","prevOnError","messageOrEvent","detail","extraParameters","_$onerror_52","listener","evt","isBluebird","_event$addMetadata","onunhandledrejection","promise","_$unhandledRejection_53","_$consoleBreadcrumbs_45","bugsnag","isStarted","m","_$notifier_11"],"mappings":"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","sourcesContent":["(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.Bugsnag = f()}})(function(){var define,module,exports;\n","module.exports = ['navigation', 'request', 'process', 'log', 'user', 'state', 'error', 'manual']\n","// Array#reduce\nmodule.exports = (arr, fn, accum) => {\n  let val = accum\n  for (let i = 0, len = arr.length; i < len; i++) val = fn(val, arr[i], i, arr)\n  return val\n}\n","const reduce = require('./reduce')\n\n// Array#filter\nmodule.exports = (arr, fn) =>\n  reduce(arr, (accum, item, i, arr) => !fn(item, i, arr) ? accum : accum.concat(item), [])\n","const reduce = require('./reduce')\n// Array#includes\nmodule.exports = (arr, x) =>\n  reduce(arr, (accum, item, i, arr) => accum === true || item === x, false)\n","// Array#isArray\nmodule.exports = obj => Object.prototype.toString.call(obj) === '[object Array]'\n","/* eslint-disable-next-line no-prototype-builtins */\nconst _hasDontEnumBug = !({ toString: null }).propertyIsEnumerable('toString')\nconst _dontEnums = [\n  'toString', 'toLocaleString', 'valueOf', 'hasOwnProperty',\n  'isPrototypeOf', 'propertyIsEnumerable', 'constructor'\n]\n\n// Object#keys\nmodule.exports = obj => {\n  // stripped down version of\n  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/Keys\n  const result = []\n  let prop\n  for (prop in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, prop)) result.push(prop)\n  }\n  if (!_hasDontEnumBug) return result\n  for (let i = 0, len = _dontEnums.length; i < len; i++) {\n    if (Object.prototype.hasOwnProperty.call(obj, _dontEnums[i])) result.push(_dontEnums[i])\n  }\n  return result\n}\n","module.exports = (min = 1, max = Infinity) => value =>\n  typeof value === 'number' &&\n  parseInt('' + value, 10) === value &&\n  value >= min && value <= max\n","const filter = require('../es-utils/filter')\nconst isArray = require('../es-utils/is-array')\n\nmodule.exports = value => typeof value === 'function' || (isArray(value) && filter(value, f => typeof f === 'function').length === value.length)\n","module.exports = value => typeof value === 'string' && !!value.length\n","const filter = require('./lib/es-utils/filter')\nconst reduce = require('./lib/es-utils/reduce')\nconst keys = require('./lib/es-utils/keys')\nconst isArray = require('./lib/es-utils/is-array')\nconst includes = require('./lib/es-utils/includes')\nconst intRange = require('./lib/validators/int-range')\nconst stringWithLength = require('./lib/validators/string-with-length')\nconst listOfFunctions = require('./lib/validators/list-of-functions')\n\nconst BREADCRUMB_TYPES = require('./lib/breadcrumb-types')\nconst defaultErrorTypes = () => ({ unhandledExceptions: true, unhandledRejections: true })\n\nmodule.exports.schema = {\n  apiKey: {\n    defaultValue: () => null,\n    message: 'is required',\n    validate: stringWithLength\n  },\n  appVersion: {\n    defaultValue: () => undefined,\n    message: 'should be a string',\n    validate: value => value === undefined || stringWithLength(value)\n  },\n  appType: {\n    defaultValue: () => undefined,\n    message: 'should be a string',\n    validate: value => value === undefined || stringWithLength(value)\n  },\n  autoDetectErrors: {\n    defaultValue: () => true,\n    message: 'should be true|false',\n    validate: value => value === true || value === false\n  },\n  enabledErrorTypes: {\n    defaultValue: () => defaultErrorTypes(),\n    message: 'should be an object containing the flags { unhandledExceptions:true|false, unhandledRejections:true|false }',\n    allowPartialObject: true,\n    validate: value => {\n      // ensure we have an object\n      if (typeof value !== 'object' || !value) return false\n      const providedKeys = keys(value)\n      const defaultKeys = keys(defaultErrorTypes())\n      // ensure it only has a subset of the allowed keys\n      if (filter(providedKeys, k => includes(defaultKeys, k)).length < providedKeys.length) return false\n      // ensure all of the values are boolean\n      if (filter(keys(value), k => typeof value[k] !== 'boolean').length > 0) return false\n      return true\n    }\n  },\n  onError: {\n    defaultValue: () => [],\n    message: 'should be a function or array of functions',\n    validate: listOfFunctions\n  },\n  onSession: {\n    defaultValue: () => [],\n    message: 'should be a function or array of functions',\n    validate: listOfFunctions\n  },\n  onBreadcrumb: {\n    defaultValue: () => [],\n    message: 'should be a function or array of functions',\n    validate: listOfFunctions\n  },\n  endpoints: {\n    defaultValue: (endpoints) => {\n      // only apply the default value if no endpoints have been provided, otherwise prevent delivery by setting to null\n      if (typeof endpoints === 'undefined') {\n        return ({\n          notify: 'https://notify.bugsnag.com',\n          sessions: 'https://sessions.bugsnag.com'\n        })\n      } else {\n        return ({ notify: null, sessions: null })\n      }\n    },\n    message: 'should be an object containing endpoint URLs { notify, sessions }',\n    validate: (val) =>\n      // first, ensure it's an object\n      (val && typeof val === 'object') &&\n      (\n        // notify and sessions must always be set\n        stringWithLength(val.notify) && stringWithLength(val.sessions)\n      ) &&\n      // ensure no keys other than notify/session are set on endpoints object\n      filter(keys(val), k => !includes(['notify', 'sessions'], k)).length === 0\n  },\n  autoTrackSessions: {\n    defaultValue: val => true,\n    message: 'should be true|false',\n    validate: val => val === true || val === false\n  },\n  enabledReleaseStages: {\n    defaultValue: () => null,\n    message: 'should be an array of strings',\n    validate: value => value === null || (isArray(value) && filter(value, f => typeof f === 'string').length === value.length)\n  },\n  releaseStage: {\n    defaultValue: () => 'production',\n    message: 'should be a string',\n    validate: value => typeof value === 'string' && value.length\n  },\n  maxBreadcrumbs: {\n    defaultValue: () => 25,\n    message: 'should be a number 100',\n    validate: value => intRange(0, 100)(value)\n  },\n  enabledBreadcrumbTypes: {\n    defaultValue: () => BREADCRUMB_TYPES,\n    message: `should be null or a list of available breadcrumb types (${BREADCRUMB_TYPES.join(',')})`,\n    validate: value => value === null || (isArray(value) && reduce(value, (accum, maybeType) => {\n      if (accum === false) return accum\n      return includes(BREADCRUMB_TYPES, maybeType)\n    }, true))\n  },\n  context: {\n    defaultValue: () => undefined,\n    message: 'should be a string',\n    validate: value => value === undefined || typeof value === 'string'\n  },\n  user: {\n    defaultValue: () => ({}),\n    message: 'should be an object with { id, email, name } properties',\n    validate: value =>\n      (value === null) ||\n      (value && reduce(\n        keys(value),\n        (accum, key) => accum && includes(['id', 'email', 'name'], key),\n        true\n      ))\n  },\n  metadata: {\n    defaultValue: () => ({}),\n    message: 'should be an object',\n    validate: (value) => typeof value === 'object' && value !== null\n  },\n  logger: {\n    defaultValue: () => undefined,\n    message: 'should be null or an object with methods { debug, info, warn, error }',\n    validate: value =>\n      (!value) ||\n      (value && reduce(\n        ['debug', 'info', 'warn', 'error'],\n        (accum, method) => accum && typeof value[method] === 'function',\n        true\n      ))\n  },\n  redactedKeys: {\n    defaultValue: () => ['password'],\n    message: 'should be an array of strings|regexes',\n    validate: value =>\n      isArray(value) && value.length === filter(value, s =>\n        (typeof s === 'string' || (s && typeof s.test === 'function'))\n      ).length\n  },\n  plugins: {\n    defaultValue: () => ([]),\n    message: 'should be an array of plugin objects',\n    validate: value =>\n      isArray(value) && value.length === filter(value, p =>\n        (p && typeof p === 'object' && typeof p.load === 'function')\n      ).length\n  },\n  featureFlags: {\n    defaultValue: () => [],\n    message: 'should be an array of objects that have a \"name\" property',\n    validate: value =>\n      isArray(value) && value.length === filter(value, feature =>\n        feature && typeof feature === 'object' && typeof feature.name === 'string'\n      ).length\n  },\n  reportUnhandledPromiseRejectionsAsHandled: {\n    defaultValue: () => false,\n    message: 'should be true|false',\n    validate: value => value === true || value === false\n  },\n  sendPayloadChecksums: {\n    defaultValue: () => false,\n    message: 'should be true|false',\n    validate: value => value === true || value === false\n  }\n}\n","// extends helper from babel\n// https://github.com/babel/babel/blob/916429b516e6466fd06588ee820e40e025d7f3a3/packages/babel-helpers/src/helpers.js#L377-L393\nmodule.exports = function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i]\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key]\n      }\n    }\n  }\n  return target\n}\n","const reduce = require('./reduce')\n\n// Array#map\nmodule.exports = (arr, fn) =>\n  reduce(arr, (accum, item, i, arr) => accum.concat(fn(item, i, arr)), [])\n","const { schema } = require('@bugsnag/core/config')\nconst map = require('@bugsnag/core/lib/es-utils/map')\nconst assign = require('@bugsnag/core/lib/es-utils/assign')\n\nmodule.exports = {\n  releaseStage: assign({}, schema.releaseStage, {\n    defaultValue: () => {\n      if (/^localhost(:\\d+)?$/.test(window.location.host)) return 'development'\n      return 'production'\n    }\n  }),\n  appType: {\n    ...schema.appType,\n    defaultValue: () => 'browser'\n  },\n  logger: assign({}, schema.logger, {\n    defaultValue: () =>\n      // set logger based on browser capability\n      (typeof console !== 'undefined' && typeof console.debug === 'function')\n        ? getPrefixedConsole()\n        : undefined\n  })\n}\n\nconst getPrefixedConsole = () => {\n  const logger = {}\n  const consoleLog = console.log\n  map(['debug', 'info', 'warn', 'error'], (method) => {\n    const consoleMethod = console[method]\n    logger[method] = typeof consoleMethod === 'function'\n      ? consoleMethod.bind(console, '[bugsnag]')\n      : consoleLog.bind(console, '[bugsnag]')\n  })\n  return logger\n}\n","class Breadcrumb {\n  constructor (message, metadata, type, timestamp = new Date()) {\n    this.type = type\n    this.message = message\n    this.metadata = metadata\n    this.timestamp = timestamp\n  }\n\n  toJSON () {\n    return {\n      type: this.type,\n      name: this.message,\n      timestamp: this.timestamp,\n      metaData: this.metadata\n    }\n  }\n}\n\nmodule.exports = Breadcrumb\n","(function(root, factory) {\n    'use strict';\n    // Universal Module Definition (UMD) to support AMD, CommonJS/Node.js, Rhino, and browsers.\n\n    /* istanbul ignore next */\n    if (typeof define === 'function' && define.amd) {\n        define('stackframe', [], factory);\n    } else if (typeof exports === 'object') {\n        module.exports = factory();\n    } else {\n        root.StackFrame = factory();\n    }\n}(this, function() {\n    'use strict';\n    function _isNumber(n) {\n        return !isNaN(parseFloat(n)) && isFinite(n);\n    }\n\n    function _capitalize(str) {\n        return str.charAt(0).toUpperCase() + str.substring(1);\n    }\n\n    function _getter(p) {\n        return function() {\n            return this[p];\n        };\n    }\n\n    var booleanProps = ['isConstructor', 'isEval', 'isNative', 'isToplevel'];\n    var numericProps = ['columnNumber', 'lineNumber'];\n    var stringProps = ['fileName', 'functionName', 'source'];\n    var arrayProps = ['args'];\n    var objectProps = ['evalOrigin'];\n\n    var props = booleanProps.concat(numericProps, stringProps, arrayProps, objectProps);\n\n    function StackFrame(obj) {\n        if (!obj) return;\n        for (var i = 0; i < props.length; i++) {\n            if (obj[props[i]] !== undefined) {\n                this['set' + _capitalize(props[i])](obj[props[i]]);\n            }\n        }\n    }\n\n    StackFrame.prototype = {\n        getArgs: function() {\n            return this.args;\n        },\n        setArgs: function(v) {\n            if (Object.prototype.toString.call(v) !== '[object Array]') {\n                throw new TypeError('Args must be an Array');\n            }\n            this.args = v;\n        },\n\n        getEvalOrigin: function() {\n            return this.evalOrigin;\n        },\n        setEvalOrigin: function(v) {\n            if (v instanceof StackFrame) {\n                this.evalOrigin = v;\n            } else if (v instanceof Object) {\n                this.evalOrigin = new StackFrame(v);\n            } else {\n                throw new TypeError('Eval Origin must be an Object or StackFrame');\n            }\n        },\n\n        toString: function() {\n            var fileName = this.getFileName() || '';\n            var lineNumber = this.getLineNumber() || '';\n            var columnNumber = this.getColumnNumber() || '';\n            var functionName = this.getFunctionName() || '';\n            if (this.getIsEval()) {\n                if (fileName) {\n                    return '[eval] (' + fileName + ':' + lineNumber + ':' + columnNumber + ')';\n                }\n                return '[eval]:' + lineNumber + ':' + columnNumber;\n            }\n            if (functionName) {\n                return functionName + ' (' + fileName + ':' + lineNumber + ':' + columnNumber + ')';\n            }\n            return fileName + ':' + lineNumber + ':' + columnNumber;\n        }\n    };\n\n    StackFrame.fromString = function StackFrame$$fromString(str) {\n        var argsStartIndex = str.indexOf('(');\n        var argsEndIndex = str.lastIndexOf(')');\n\n        var functionName = str.substring(0, argsStartIndex);\n        var args = str.substring(argsStartIndex + 1, argsEndIndex).split(',');\n        var locationString = str.substring(argsEndIndex + 1);\n\n        if (locationString.indexOf('@') === 0) {\n            var parts = /@(.+?)(?::(\\d+))?(?::(\\d+))?$/.exec(locationString, '');\n            var fileName = parts[1];\n            var lineNumber = parts[2];\n            var columnNumber = parts[3];\n        }\n\n        return new StackFrame({\n            functionName: functionName,\n            args: args || undefined,\n            fileName: fileName,\n            lineNumber: lineNumber || undefined,\n            columnNumber: columnNumber || undefined\n        });\n    };\n\n    for (var i = 0; i < booleanProps.length; i++) {\n        StackFrame.prototype['get' + _capitalize(booleanProps[i])] = _getter(booleanProps[i]);\n        StackFrame.prototype['set' + _capitalize(booleanProps[i])] = (function(p) {\n            return function(v) {\n                this[p] = Boolean(v);\n            };\n        })(booleanProps[i]);\n    }\n\n    for (var j = 0; j < numericProps.length; j++) {\n        StackFrame.prototype['get' + _capitalize(numericProps[j])] = _getter(numericProps[j]);\n        StackFrame.prototype['set' + _capitalize(numericProps[j])] = (function(p) {\n            return function(v) {\n                if (!_isNumber(v)) {\n                    throw new TypeError(p + ' must be a Number');\n                }\n                this[p] = Number(v);\n            };\n        })(numericProps[j]);\n    }\n\n    for (var k = 0; k < stringProps.length; k++) {\n        StackFrame.prototype['get' + _capitalize(stringProps[k])] = _getter(stringProps[k]);\n        StackFrame.prototype['set' + _capitalize(stringProps[k])] = (function(p) {\n            return function(v) {\n                this[p] = String(v);\n            };\n        })(stringProps[k]);\n    }\n\n    return StackFrame;\n}));\n","(function(root, factory) {\n    'use strict';\n    // Universal Module Definition (UMD) to support AMD, CommonJS/Node.js, Rhino, and browsers.\n\n    /* istanbul ignore next */\n    if (typeof define === 'function' && define.amd) {\n        define('stack-generator', ['stackframe'], factory);\n    } else if (typeof exports === 'object') {\n        module.exports = factory(require('stackframe'));\n    } else {\n        root.StackGenerator = factory(root.StackFrame);\n    }\n}(this, function(StackFrame) {\n    return {\n        backtrace: function StackGenerator$$backtrace(opts) {\n            var stack = [];\n            var maxStackSize = 10;\n\n            if (typeof opts === 'object' && typeof opts.maxStackSize === 'number') {\n                maxStackSize = opts.maxStackSize;\n            }\n\n            var curr = arguments.callee;\n            while (curr && stack.length < maxStackSize && curr['arguments']) {\n                // Allow V8 optimizations\n                var args = new Array(curr['arguments'].length);\n                for (var i = 0; i < args.length; ++i) {\n                    args[i] = curr['arguments'][i];\n                }\n                if (/function(?:\\s+([\\w$]+))+\\s*\\(/.test(curr.toString())) {\n                    stack.push(new StackFrame({functionName: RegExp.$1 || undefined, args: args}));\n                } else {\n                    stack.push(new StackFrame({args: args}));\n                }\n\n                try {\n                    curr = curr.caller;\n                } catch (e) {\n                    break;\n                }\n            }\n            return stack;\n        }\n    };\n}));\n","(function(root, factory) {\n    'use strict';\n    // Universal Module Definition (UMD) to support AMD, CommonJS/Node.js, Rhino, and browsers.\n\n    /* istanbul ignore next */\n    if (typeof define === 'function' && define.amd) {\n        define('error-stack-parser', ['stackframe'], factory);\n    } else if (typeof exports === 'object') {\n        module.exports = factory(require('stackframe'));\n    } else {\n        root.ErrorStackParser = factory(root.StackFrame);\n    }\n}(this, function ErrorStackParser(StackFrame) {\n    'use strict';\n\n    var FIREFOX_SAFARI_STACK_REGEXP = /(^|@)\\S+:\\d+/;\n    var CHROME_IE_STACK_REGEXP = /^\\s*at .*(\\S+:\\d+|\\(native\\))/m;\n    var SAFARI_NATIVE_CODE_REGEXP = /^(eval@)?(\\[native code])?$/;\n\n    return {\n        /**\n         * Given an Error object, extract the most information from it.\n         *\n         * @param {Error} error object\n         * @return {Array} of StackFrames\n         */\n        parse: function ErrorStackParser$$parse(error) {\n            if (typeof error.stacktrace !== 'undefined' || typeof error['opera#sourceloc'] !== 'undefined') {\n                return this.parseOpera(error);\n            } else if (error.stack && error.stack.match(CHROME_IE_STACK_REGEXP)) {\n                return this.parseV8OrIE(error);\n            } else if (error.stack) {\n                return this.parseFFOrSafari(error);\n            } else {\n                throw new Error('Cannot parse given Error object');\n            }\n        },\n\n        // Separate line and column numbers from a string of the form: (URI:Line:Column)\n        extractLocation: function ErrorStackParser$$extractLocation(urlLike) {\n            // Fail-fast but return locations like \"(native)\"\n            if (urlLike.indexOf(':') === -1) {\n                return [urlLike];\n            }\n\n            var regExp = /(.+?)(?::(\\d+))?(?::(\\d+))?$/;\n            var parts = regExp.exec(urlLike.replace(/[()]/g, ''));\n            return [parts[1], parts[2] || undefined, parts[3] || undefined];\n        },\n\n        parseV8OrIE: function ErrorStackParser$$parseV8OrIE(error) {\n            var filtered = error.stack.split('\\n').filter(function(line) {\n                return !!line.match(CHROME_IE_STACK_REGEXP);\n            }, this);\n\n            return filtered.map(function(line) {\n                if (line.indexOf('(eval ') > -1) {\n                    // Throw away eval information until we implement stacktrace.js/stackframe#8\n                    line = line.replace(/eval code/g, 'eval').replace(/(\\(eval at [^()]*)|(\\),.*$)/g, '');\n                }\n                var sanitizedLine = line.replace(/^\\s+/, '').replace(/\\(eval code/g, '(');\n\n                // capture and preseve the parenthesized location \"(/foo/my bar.js:12:87)\" in\n                // case it has spaces in it, as the string is split on \\s+ later on\n                var location = sanitizedLine.match(/ (\\((.+):(\\d+):(\\d+)\\)$)/);\n\n                // remove the parenthesized location from the line, if it was matched\n                sanitizedLine = location ? sanitizedLine.replace(location[0], '') : sanitizedLine;\n\n                var tokens = sanitizedLine.split(/\\s+/).slice(1);\n                // if a location was matched, pass it to extractLocation() otherwise pop the last token\n                var locationParts = this.extractLocation(location ? location[1] : tokens.pop());\n                var functionName = tokens.join(' ') || undefined;\n                var fileName = ['eval', '<anonymous>'].indexOf(locationParts[0]) > -1 ? undefined : locationParts[0];\n\n                return new StackFrame({\n                    functionName: functionName,\n                    fileName: fileName,\n                    lineNumber: locationParts[1],\n                    columnNumber: locationParts[2],\n                    source: line\n                });\n            }, this);\n        },\n\n        parseFFOrSafari: function ErrorStackParser$$parseFFOrSafari(error) {\n            var filtered = error.stack.split('\\n').filter(function(line) {\n                return !line.match(SAFARI_NATIVE_CODE_REGEXP);\n            }, this);\n\n            return filtered.map(function(line) {\n                // Throw away eval information until we implement stacktrace.js/stackframe#8\n                if (line.indexOf(' > eval') > -1) {\n                    line = line.replace(/ line (\\d+)(?: > eval line \\d+)* > eval:\\d+:\\d+/g, ':$1');\n                }\n\n                if (line.indexOf('@') === -1 && line.indexOf(':') === -1) {\n                    // Safari eval frames only have function names and nothing else\n                    return new StackFrame({\n                        functionName: line\n                    });\n                } else {\n                    var functionNameRegex = /((.*\".+\"[^@]*)?[^@]*)(?:@)/;\n                    var matches = line.match(functionNameRegex);\n                    var functionName = matches && matches[1] ? matches[1] : undefined;\n                    var locationParts = this.extractLocation(line.replace(functionNameRegex, ''));\n\n                    return new StackFrame({\n                        functionName: functionName,\n                        fileName: locationParts[0],\n                        lineNumber: locationParts[1],\n                        columnNumber: locationParts[2],\n                        source: line\n                    });\n                }\n            }, this);\n        },\n\n        parseOpera: function ErrorStackParser$$parseOpera(e) {\n            if (!e.stacktrace || (e.message.indexOf('\\n') > -1 &&\n                e.message.split('\\n').length > e.stacktrace.split('\\n').length)) {\n                return this.parseOpera9(e);\n            } else if (!e.stack) {\n                return this.parseOpera10(e);\n            } else {\n                return this.parseOpera11(e);\n            }\n        },\n\n        parseOpera9: function ErrorStackParser$$parseOpera9(e) {\n            var lineRE = /Line (\\d+).*script (?:in )?(\\S+)/i;\n            var lines = e.message.split('\\n');\n            var result = [];\n\n            for (var i = 2, len = lines.length; i < len; i += 2) {\n                var match = lineRE.exec(lines[i]);\n                if (match) {\n                    result.push(new StackFrame({\n                        fileName: match[2],\n                        lineNumber: match[1],\n                        source: lines[i]\n                    }));\n                }\n            }\n\n            return result;\n        },\n\n        parseOpera10: function ErrorStackParser$$parseOpera10(e) {\n            var lineRE = /Line (\\d+).*script (?:in )?(\\S+)(?:: In function (\\S+))?$/i;\n            var lines = e.stacktrace.split('\\n');\n            var result = [];\n\n            for (var i = 0, len = lines.length; i < len; i += 2) {\n                var match = lineRE.exec(lines[i]);\n                if (match) {\n                    result.push(\n                        new StackFrame({\n                            functionName: match[3] || undefined,\n                            fileName: match[2],\n                            lineNumber: match[1],\n                            source: lines[i]\n                        })\n                    );\n                }\n            }\n\n            return result;\n        },\n\n        // Opera 10.65+ Error.stack very similar to FF/Safari\n        parseOpera11: function ErrorStackParser$$parseOpera11(error) {\n            var filtered = error.stack.split('\\n').filter(function(line) {\n                return !!line.match(FIREFOX_SAFARI_STACK_REGEXP) && !line.match(/^Error created at/);\n            }, this);\n\n            return filtered.map(function(line) {\n                var tokens = line.split('@');\n                var locationParts = this.extractLocation(tokens.pop());\n                var functionCall = (tokens.shift() || '');\n                var functionName = functionCall\n                    .replace(/<anonymous function(: (\\w+))?>/, '$2')\n                    .replace(/\\([^)]*\\)/g, '') || undefined;\n                var argsRaw;\n                if (functionCall.match(/\\(([^)]*)\\)/)) {\n                    argsRaw = functionCall.replace(/^[^(]+\\(([^)]*)\\)$/, '$1');\n                }\n                var args = (argsRaw === undefined || argsRaw === '[arguments not available]') ?\n                    undefined : argsRaw.split(',');\n\n                return new StackFrame({\n                    functionName: functionName,\n                    args: args,\n                    fileName: locationParts[0],\n                    lineNumber: locationParts[1],\n                    columnNumber: locationParts[2],\n                    source: line\n                });\n            }, this);\n        }\n    };\n}));\n","module.exports = require('error-stack-parser')\n","module.exports = function (data, replacer, space, opts) {\n  var redactedKeys = opts && opts.redactedKeys ? opts.redactedKeys : []\n  var redactedPaths = opts && opts.redactedPaths ? opts.redactedPaths : []\n  return JSON.stringify(\n    prepareObjForSerialization(data, redactedKeys, redactedPaths),\n    replacer,\n    space\n  )\n}\n\nvar MAX_DEPTH = 20\nvar MAX_EDGES = 25000\nvar MIN_PRESERVED_DEPTH = 8\n\nvar REPLACEMENT_NODE = '...'\n\nfunction isError (o) {\n  return o instanceof Error ||\n    /^\\[object (Error|(Dom)?Exception)\\]$/.test(Object.prototype.toString.call(o))\n}\n\nfunction throwsMessage (err) {\n  return '[Throws: ' + (err ? err.message : '?') + ']'\n}\n\nfunction find (haystack, needle) {\n  for (var i = 0, len = haystack.length; i < len; i++) {\n    if (haystack[i] === needle) return true\n  }\n  return false\n}\n\n// returns true if the string `path` starts with any of the provided `paths`\nfunction isDescendent (paths, path) {\n  for (var i = 0, len = paths.length; i < len; i++) {\n    if (path.indexOf(paths[i]) === 0) return true\n  }\n  return false\n}\n\nfunction shouldRedact (patterns, key) {\n  for (var i = 0, len = patterns.length; i < len; i++) {\n    if (typeof patterns[i] === 'string' && patterns[i].toLowerCase() === key.toLowerCase()) return true\n    if (patterns[i] && typeof patterns[i].test === 'function' && patterns[i].test(key)) return true\n  }\n  return false\n}\n\nfunction isArray (obj) {\n  return Object.prototype.toString.call(obj) === '[object Array]'\n}\n\nfunction safelyGetProp (obj, prop) {\n  try {\n    return obj[prop]\n  } catch (err) {\n    return throwsMessage(err)\n  }\n}\n\nfunction prepareObjForSerialization (obj, redactedKeys, redactedPaths) {\n  var seen = [] // store references to objects we have seen before\n  var edges = 0\n\n  function visit (obj, path) {\n    function edgesExceeded () {\n      return path.length > MIN_PRESERVED_DEPTH && edges > MAX_EDGES\n    }\n\n    edges++\n\n    if (path.length > MAX_DEPTH) return REPLACEMENT_NODE\n    if (edgesExceeded()) return REPLACEMENT_NODE\n    if (obj === null || typeof obj !== 'object') return obj\n    if (find(seen, obj)) return '[Circular]'\n\n    seen.push(obj)\n\n    if (typeof obj.toJSON === 'function') {\n      try {\n        // we're not going to count this as an edge because it\n        // replaces the value of the currently visited object\n        edges--\n        var fResult = visit(obj.toJSON(), path)\n        seen.pop()\n        return fResult\n      } catch (err) {\n        return throwsMessage(err)\n      }\n    }\n\n    var er = isError(obj)\n    if (er) {\n      edges--\n      var eResult = visit({ name: obj.name, message: obj.message }, path)\n      seen.pop()\n      return eResult\n    }\n\n    if (isArray(obj)) {\n      var aResult = []\n      for (var i = 0, len = obj.length; i < len; i++) {\n        if (edgesExceeded()) {\n          aResult.push(REPLACEMENT_NODE)\n          break\n        }\n        aResult.push(visit(obj[i], path.concat('[]')))\n      }\n      seen.pop()\n      return aResult\n    }\n\n    var result = {}\n    try {\n      for (var prop in obj) {\n        if (!Object.prototype.hasOwnProperty.call(obj, prop)) continue\n        if (isDescendent(redactedPaths, path.join('.')) && shouldRedact(redactedKeys, prop)) {\n          result[prop] = '[REDACTED]'\n          continue\n        }\n        if (edgesExceeded()) {\n          result[prop] = REPLACEMENT_NODE\n          break\n        }\n        result[prop] = visit(safelyGetProp(obj, prop), path.concat(prop))\n      }\n    } catch (e) {}\n    seen.pop()\n    return result\n  }\n\n  return visit(obj, [])\n}\n","const map = require('./es-utils/map')\nconst filter = require('./es-utils/filter')\nconst isArray = require('./es-utils/is-array')\nconst jsonStringify = require('@bugsnag/safe-json-stringify')\n\nfunction add (existingFeatures, existingFeatureKeys, name, variant) {\n  if (typeof name !== 'string') {\n    return\n  }\n\n  if (variant === undefined) {\n    variant = null\n  } else if (variant !== null && typeof variant !== 'string') {\n    variant = jsonStringify(variant)\n  }\n\n  const existingIndex = existingFeatureKeys[name]\n  if (typeof existingIndex === 'number') {\n    existingFeatures[existingIndex] = { name, variant }\n    return\n  }\n\n  existingFeatures.push({ name, variant })\n  existingFeatureKeys[name] = existingFeatures.length - 1\n}\n\nfunction merge (existingFeatures, newFeatures, existingFeatureKeys) {\n  if (!isArray(newFeatures)) {\n    return\n  }\n\n  for (let i = 0; i < newFeatures.length; ++i) {\n    const feature = newFeatures[i]\n\n    if (feature === null || typeof feature !== 'object') {\n      continue\n    }\n\n    // 'add' will handle if 'name' doesn't exist & 'variant' is optional\n    add(existingFeatures, existingFeatureKeys, feature.name, feature.variant)\n  }\n\n  return existingFeatures\n}\n\n// convert feature flags from a map of 'name -> variant' into the format required\n// by the Bugsnag Event API:\n//   [{ featureFlag: 'name', variant: 'variant' }, { featureFlag: 'name 2' }]\nfunction toEventApi (featureFlags) {\n  return map(\n    filter(featureFlags, Boolean),\n    ({ name, variant }) => {\n      const flag = { featureFlag: name }\n\n      // don't add a 'variant' property unless there's actually a value\n      if (typeof variant === 'string') {\n        flag.variant = variant\n      }\n\n      return flag\n    }\n  )\n}\n\nfunction clear (features, featuresIndex, name) {\n  const existingIndex = featuresIndex[name]\n  if (typeof existingIndex === 'number') {\n    features[existingIndex] = null\n    delete featuresIndex[name]\n  }\n}\n\nmodule.exports = { add, clear, merge, toEventApi }\n","// Given `err` which may be an error, does it have a stack property which is a string?\nmodule.exports = err =>\n  !!err &&\n  (!!err.stack || !!err.stacktrace || !!err['opera#sourceloc']) &&\n  typeof (err.stack || err.stacktrace || err['opera#sourceloc']) === 'string' &&\n  err.stack !== `${err.name}: ${err.message}`\n","module.exports = require('iserror')\n","\n/**\n * Expose `isError`.\n */\n\nmodule.exports = isError;\n\n/**\n * Test whether `value` is error object.\n *\n * @param {*} value\n * @returns {boolean}\n */\n\nfunction isError(value) {\n  switch (Object.prototype.toString.call(value)) {\n    case '[object Error]': return true;\n    case '[object Exception]': return true;\n    case '[object DOMException]': return true;\n    default: return value instanceof Error;\n  }\n}\n","const assign = require('./es-utils/assign')\n\nconst add = (state, section, keyOrObj, maybeVal) => {\n  if (!section) return\n  let updates\n\n  // addMetadata(\"section\", null) -> clears section\n  if (keyOrObj === null) return clear(state, section)\n\n  // normalise the two supported input types into object form\n  if (typeof keyOrObj === 'object') updates = keyOrObj\n  if (typeof keyOrObj === 'string') updates = { [keyOrObj]: maybeVal }\n\n  // exit if we don't have an updates object at this point\n  if (!updates) return\n\n  // preventing the __proto__ property from being used as a key\n  if (section === '__proto__' || section === 'constructor' || section === 'prototype') {\n    return\n  }\n\n  // ensure a section with this name exists\n  if (!state[section]) state[section] = {}\n\n  // merge the updates with the existing section\n  state[section] = assign({}, state[section], updates)\n}\n\nconst get = (state, section, key) => {\n  if (typeof section !== 'string') return undefined\n  if (!key) {\n    return state[section]\n  }\n  if (state[section]) {\n    return state[section][key]\n  }\n  return undefined\n}\n\nconst clear = (state, section, key) => {\n  if (typeof section !== 'string') return\n\n  // clear an entire section\n  if (!key) {\n    delete state[section]\n    return\n  }\n\n  // preventing the __proto__ property from being used as a key\n  if (section === '__proto__' || section === 'constructor' || section === 'prototype') {\n    return\n  }\n\n  // clear a single value from a section\n  if (state[section]) {\n    delete state[section][key]\n  }\n}\n\nmodule.exports = { add, get, clear }\n","const ErrorStackParser = require('./lib/error-stack-parser')\nconst StackGenerator = require('stack-generator')\nconst hasStack = require('./lib/has-stack')\nconst map = require('./lib/es-utils/map')\nconst reduce = require('./lib/es-utils/reduce')\nconst filter = require('./lib/es-utils/filter')\nconst assign = require('./lib/es-utils/assign')\nconst metadataDelegate = require('./lib/metadata-delegate')\nconst featureFlagDelegate = require('./lib/feature-flag-delegate')\nconst isError = require('./lib/iserror')\n\nclass Event {\n  constructor (errorClass, errorMessage, stacktrace = [], handledState = defaultHandledState(), originalError) {\n    this.apiKey = undefined\n    this.context = undefined\n    this.groupingHash = undefined\n    this.originalError = originalError\n\n    this._handledState = handledState\n    this.severity = this._handledState.severity\n    this.unhandled = this._handledState.unhandled\n\n    this.app = {}\n    this.device = {}\n    this.request = {}\n\n    this.breadcrumbs = []\n    this.threads = []\n\n    this._metadata = {}\n    this._features = []\n    this._featuresIndex = {}\n    this._user = {}\n    this._session = undefined\n    this._correlation = undefined\n\n    this.errors = [\n      createBugsnagError(errorClass, errorMessage, Event.__type, stacktrace)\n    ]\n\n    // Flags.\n    // Note these are not initialised unless they are used\n    // to save unnecessary bytes in the browser bundle\n\n    /* this.attemptImmediateDelivery, default: true */\n  }\n\n  addMetadata (section, keyOrObj, maybeVal) {\n    return metadataDelegate.add(this._metadata, section, keyOrObj, maybeVal)\n  }\n\n  /**\n     * Associate this event with a specific trace. This is usually done automatically when\n     * using bugsnag-js-performance, but can also be set manually if required.\n     *\n     * @param traceId the ID of the trace the event occurred within\n     * @param spanId the ID of the span that the event occurred within\n     */\n  setTraceCorrelation (traceId, spanId) {\n    if (typeof traceId === 'string') {\n      this._correlation = { traceId, ...typeof spanId === 'string' ? { spanId } : { } }\n    }\n  }\n\n  getMetadata (section, key) {\n    return metadataDelegate.get(this._metadata, section, key)\n  }\n\n  clearMetadata (section, key) {\n    return metadataDelegate.clear(this._metadata, section, key)\n  }\n\n  addFeatureFlag (name, variant = null) {\n    featureFlagDelegate.add(this._features, this._featuresIndex, name, variant)\n  }\n\n  addFeatureFlags (featureFlags) {\n    featureFlagDelegate.merge(this._features, featureFlags, this._featuresIndex)\n  }\n\n  getFeatureFlags () {\n    return featureFlagDelegate.toEventApi(this._features)\n  }\n\n  clearFeatureFlag (name) {\n    featureFlagDelegate.clear(this._features, this._featuresIndex, name)\n  }\n\n  clearFeatureFlags () {\n    this._features = []\n    this._featuresIndex = {}\n  }\n\n  getUser () {\n    return this._user\n  }\n\n  setUser (id, email, name) {\n    this._user = { id, email, name }\n  }\n\n  toJSON () {\n    return {\n      payloadVersion: '4',\n      exceptions: map(this.errors, er => assign({}, er, { message: er.errorMessage })),\n      severity: this.severity,\n      unhandled: this._handledState.unhandled,\n      severityReason: this._handledState.severityReason,\n      app: this.app,\n      device: this.device,\n      request: this.request,\n      breadcrumbs: this.breadcrumbs,\n      context: this.context,\n      groupingHash: this.groupingHash,\n      metaData: this._metadata,\n      user: this._user,\n      session: this._session,\n      featureFlags: this.getFeatureFlags(),\n      correlation: this._correlation\n    }\n  }\n}\n\n// takes a stacktrace.js style stackframe (https://github.com/stacktracejs/stackframe)\n// and returns a Bugsnag compatible stackframe (https://docs.bugsnag.com/api/error-reporting/#json-payload)\nconst formatStackframe = frame => {\n  const f = {\n    file: frame.fileName,\n    method: normaliseFunctionName(frame.functionName),\n    lineNumber: frame.lineNumber,\n    columnNumber: frame.columnNumber,\n    code: undefined,\n    inProject: undefined\n  }\n  // Some instances result in no file:\n  // - calling notify() from chrome's terminal results in no file/method.\n  // - non-error exception thrown from global code in FF\n  // This adds one.\n  if (f.lineNumber > -1 && !f.file && !f.method) {\n    f.file = 'global code'\n  }\n  return f\n}\n\nconst normaliseFunctionName = name => /^global code$/i.test(name) ? 'global code' : name\n\nconst defaultHandledState = () => ({\n  unhandled: false,\n  severity: 'warning',\n  severityReason: { type: 'handledException' }\n})\n\nconst ensureString = (str) => typeof str === 'string' ? str : ''\n\nfunction createBugsnagError (errorClass, errorMessage, type, stacktrace) {\n  return {\n    errorClass: ensureString(errorClass),\n    errorMessage: ensureString(errorMessage),\n    type,\n    stacktrace: reduce(stacktrace, (accum, frame) => {\n      const f = formatStackframe(frame)\n      // don't include a stackframe if none of its properties are defined\n      try {\n        if (JSON.stringify(f) === '{}') return accum\n        return accum.concat(f)\n      } catch (e) {\n        return accum\n      }\n    }, [])\n  }\n}\n\nfunction getCauseStack (error) {\n  if (error.cause) {\n    return [error, ...getCauseStack(error.cause)]\n  } else {\n    return [error]\n  }\n}\n\n// Helpers\n\nEvent.getStacktrace = function (error, errorFramesToSkip, backtraceFramesToSkip) {\n  if (hasStack(error)) return ErrorStackParser.parse(error).slice(errorFramesToSkip)\n  // error wasn't provided or didn't have a stacktrace so try to walk the callstack\n  try {\n    return filter(StackGenerator.backtrace(), frame =>\n      (frame.functionName || '').indexOf('StackGenerator$$') === -1\n    ).slice(1 + backtraceFramesToSkip)\n  } catch (e) {\n    return []\n  }\n}\n\nEvent.create = function (maybeError, tolerateNonErrors, handledState, component, errorFramesToSkip = 0, logger) {\n  const [error, internalFrames] = normaliseError(maybeError, tolerateNonErrors, component, logger)\n  let event\n  try {\n    const stacktrace = Event.getStacktrace(\n      error,\n      // if an error was created/throw in the normaliseError() function, we need to\n      // tell the getStacktrace() function to skip the number of frames we know will\n      // be from our own functions. This is added to the number of frames deep we\n      // were told about\n      internalFrames > 0 ? 1 + internalFrames + errorFramesToSkip : 0,\n      // if there's no stacktrace, the callstack may be walked to generated one.\n      // this is how many frames should be removed because they come from our library\n      1 + errorFramesToSkip\n    )\n    event = new Event(error.name, error.message, stacktrace, handledState, maybeError)\n  } catch (e) {\n    event = new Event(error.name, error.message, [], handledState, maybeError)\n  }\n  if (error.name === 'InvalidError') {\n    event.addMetadata(`${component}`, 'non-error parameter', makeSerialisable(maybeError))\n  }\n  if (error.cause) {\n    const causes = getCauseStack(error).slice(1)\n    const normalisedCauses = map(causes, (cause) => {\n      // Only get stacktrace for error causes that are a valid JS Error and already have a stack\n      const stacktrace = (isError(cause) && hasStack(cause)) ? ErrorStackParser.parse(cause) : []\n      const [error] = normaliseError(cause, true, 'error cause')\n      if (error.name === 'InvalidError') event.addMetadata('error cause', makeSerialisable(cause))\n      return createBugsnagError(error.name, error.message, Event.__type, stacktrace)\n    })\n\n    event.errors.push(...normalisedCauses)\n  }\n\n  return event\n}\n\nconst makeSerialisable = (err) => {\n  if (err === null) return 'null'\n  if (err === undefined) return 'undefined'\n  return err\n}\n\nconst normaliseError = (maybeError, tolerateNonErrors, component, logger) => {\n  let error\n  let internalFrames = 0\n\n  const createAndLogInputError = (reason) => {\n    const verb = (component === 'error cause' ? 'was' : 'received')\n    if (logger) logger.warn(`${component} ${verb} a non-error: \"${reason}\"`)\n    const err = new Error(`${component} ${verb} a non-error. See \"${component}\" tab for more detail.`)\n    err.name = 'InvalidError'\n    return err\n  }\n\n  // In some cases:\n  //\n  //  - the promise rejection handler (both in the browser and node)\n  //  - the node uncaughtException handler\n  //\n  // We are really limited in what we can do to get a stacktrace. So we use the\n  // tolerateNonErrors option to ensure that the resulting error communicates as\n  // such.\n  if (!tolerateNonErrors) {\n    if (isError(maybeError)) {\n      error = maybeError\n    } else {\n      error = createAndLogInputError(typeof maybeError)\n      internalFrames += 2\n    }\n  } else {\n    switch (typeof maybeError) {\n      case 'string':\n      case 'number':\n      case 'boolean':\n        error = new Error(String(maybeError))\n        internalFrames += 1\n        break\n      case 'function':\n        error = createAndLogInputError('function')\n        internalFrames += 2\n        break\n      case 'object':\n        if (maybeError !== null && isError(maybeError)) {\n          error = maybeError\n        } else if (maybeError !== null && hasNecessaryFields(maybeError)) {\n          error = new Error(maybeError.message || maybeError.errorMessage)\n          error.name = maybeError.name || maybeError.errorClass\n          internalFrames += 1\n        } else {\n          error = createAndLogInputError(maybeError === null ? 'null' : 'unsupported object')\n          internalFrames += 2\n        }\n        break\n      default:\n        error = createAndLogInputError('nothing')\n        internalFrames += 2\n    }\n  }\n\n  if (!hasStack(error)) {\n    // in IE10/11 a new Error() doesn't have a stacktrace until you throw it, so try that here\n    try {\n      throw error\n    } catch (e) {\n      if (hasStack(e)) {\n        error = e\n        // if the error only got a stacktrace after we threw it here, we know it\n        // will only have one extra internal frame from this function, regardless\n        // of whether it went through createAndLogInputError() or not\n        internalFrames = 1\n      }\n    }\n  }\n\n  return [error, internalFrames]\n}\n\n// default value for stacktrace.type\nEvent.__type = 'browserjs'\n\nconst hasNecessaryFields = error =>\n  (typeof error.name === 'string' || typeof error.errorClass === 'string') &&\n  (typeof error.message === 'string' || typeof error.errorMessage === 'string')\n\nmodule.exports = Event\n","module.exports = (callbacks, callbackArg, callbackType, logger) => {\n  let ignore = false\n  const cbs = callbacks.slice()\n  while (!ignore) {\n    if (!cbs.length) break\n    try {\n      ignore = cbs.pop()(callbackArg) === false\n    } catch (e) {\n      logger.error(`Error occurred in ${callbackType} callback, continuing anyway`)\n      logger.error(e)\n    }\n  }\n  return ignore\n}\n","module.exports = function pad (num, size) {\n  var s = '000000000' + num;\n  return s.substr(s.length - size);\n};\n","var pad = require('./pad.js');\n\nvar env = typeof window === 'object' ? window : self;\nvar globalCount = 0;\nfor (var prop in env) {\n  if (Object.hasOwnProperty.call(env, prop)) globalCount++;\n}\nvar mimeTypesLength = navigator.mimeTypes ? navigator.mimeTypes.length : 0;\nvar clientId = pad((mimeTypesLength +\n  navigator.userAgent.length).toString(36) +\n  globalCount.toString(36), 4);\n\nmodule.exports = function fingerprint () {\n  return clientId;\n};\n","/**\n * cuid.js\n * Collision-resistant UID generator for browsers and node.\n * Sequential for fast db lookups and recency sorting.\n * Safe for element IDs and server-side lookups.\n *\n * Extracted from CLCTR\n *\n * Copyright (c) Eric Elliott 2012\n * MIT License\n */\n\nvar fingerprint = require('./lib/fingerprint.js');\nvar isCuid = require('./lib/is-cuid.js');\nvar pad = require('./lib/pad.js');\n\nvar c = 0,\n  blockSize = 4,\n  base = 36,\n  discreteValues = Math.pow(base, blockSize);\n\nfunction randomBlock () {\n  return pad((Math.random() *\n    discreteValues << 0)\n    .toString(base), blockSize);\n}\n\nfunction safeCounter () {\n  c = c < discreteValues ? c : 0;\n  c++; // this is not subliminal\n  return c - 1;\n}\n\nfunction cuid () {\n  // Starting with a lowercase letter makes\n  // it HTML element ID friendly.\n  var letter = 'c', // hard-coded allows for sequential access\n\n    // timestamp\n    // warning: this exposes the exact date and time\n    // that the uid was created.\n    timestamp = new Date().getTime().toString(base),\n\n    // Prevent same-machine collisions.\n    counter = pad(safeCounter().toString(base), blockSize),\n\n    // A few chars to generate distinct ids for different\n    // clients (so different computers are far less\n    // likely to generate the same id)\n    print = fingerprint(),\n\n    // Grab some more chars from Math.random()\n    random = randomBlock() + randomBlock();\n\n  return letter + timestamp + counter + print + random;\n}\n\ncuid.fingerprint = fingerprint;\ncuid.isCuid = isCuid;\n\nmodule.exports = cuid;\n","/**\n * Check the provided value is a valid device id\n * @param {unknown} value\n * @returns\n */\nmodule.exports = function isCuid (value) {\n    return typeof value === 'string' && (/^c[a-z0-9]{20,32}$/).test(value);\n};\n","const cuid = require('@bugsnag/cuid')\n\nclass Session {\n  constructor () {\n    this.id = cuid()\n    this.startedAt = new Date()\n    this._handled = 0\n    this._unhandled = 0\n    this._user = {}\n    this.app = {}\n    this.device = {}\n  }\n\n  getUser () {\n    return this._user\n  }\n\n  setUser (id, email, name) {\n    this._user = { id, email, name }\n  }\n\n  toJSON () {\n    return {\n      id: this.id,\n      startedAt: this.startedAt,\n      events: { handled: this._handled, unhandled: this._unhandled }\n    }\n  }\n\n  _track (event) {\n    this[event._handledState.unhandled ? '_unhandled' : '_handled'] += 1\n  }\n}\n\nmodule.exports = Session\n","const config = require('./config')\nconst Event = require('./event')\nconst Breadcrumb = require('./breadcrumb')\nconst Session = require('./session')\nconst map = require('./lib/es-utils/map')\nconst includes = require('./lib/es-utils/includes')\nconst filter = require('./lib/es-utils/filter')\nconst reduce = require('./lib/es-utils/reduce')\nconst keys = require('./lib/es-utils/keys')\nconst assign = require('./lib/es-utils/assign')\nconst runCallbacks = require('./lib/callback-runner')\nconst metadataDelegate = require('./lib/metadata-delegate')\nconst runSyncCallbacks = require('./lib/sync-callback-runner')\nconst BREADCRUMB_TYPES = require('./lib/breadcrumb-types')\nconst { add, clear, merge } = require('./lib/feature-flag-delegate')\nconst HUB_PREFIX = '00000'\nconst HUB_NOTIFY = 'https://notify.insighthub.smartbear.com'\nconst HUB_SESSION = 'https://sessions.insighthub.smartbear.com'\n\nconst noop = () => { }\n\nclass Client {\n  constructor (configuration, schema = config.schema, internalPlugins = [], notifier) {\n    // notifier id\n    this._notifier = notifier\n\n    // intialise opts and config\n    this._config = {}\n    this._schema = schema\n\n    // i/o\n    this._delivery = { sendSession: noop, sendEvent: noop }\n    this._logger = { debug: noop, info: noop, warn: noop, error: noop }\n\n    // plugins\n    this._plugins = {}\n\n    // state\n    this._breadcrumbs = []\n    this._session = null\n    this._metadata = {}\n    this._featuresIndex = {}\n    this._features = []\n    this._context = undefined\n    this._user = {}\n\n    // callbacks:\n    //  e: onError\n    //  s: onSession\n    //  sp: onSessionPayload\n    //  b: onBreadcrumb\n    // (note these names are minified by hand because object\n    // properties are not safe to minify automatically)\n    this._cbs = {\n      e: [],\n      s: [],\n      sp: [],\n      b: []\n    }\n\n    // expose internal constructors\n    this.Client = Client\n    this.Event = Event\n    this.Breadcrumb = Breadcrumb\n    this.Session = Session\n\n    this._config = this._configure(configuration, internalPlugins)\n    map(internalPlugins.concat(this._config.plugins), pl => {\n      if (pl) this._loadPlugin(pl)\n    })\n\n    // when notify() is called we need to know how many frames are from our own source\n    // this inital value is 1 not 0 because we wrap notify() to ensure it is always\n    // bound to have the client as its `this` value  see below.\n    this._depth = 1\n\n    const self = this\n    const notify = this.notify\n    this.notify = function () {\n      return notify.apply(self, arguments)\n    }\n  }\n\n  addMetadata (section, keyOrObj, maybeVal) {\n    return metadataDelegate.add(this._metadata, section, keyOrObj, maybeVal)\n  }\n\n  getMetadata (section, key) {\n    return metadataDelegate.get(this._metadata, section, key)\n  }\n\n  clearMetadata (section, key) {\n    return metadataDelegate.clear(this._metadata, section, key)\n  }\n\n  addFeatureFlag (name, variant = null) {\n    add(this._features, this._featuresIndex, name, variant)\n  }\n\n  addFeatureFlags (featureFlags) {\n    merge(this._features, featureFlags, this._featuresIndex)\n  }\n\n  clearFeatureFlag (name) {\n    clear(this._features, this._featuresIndex, name)\n  }\n\n  clearFeatureFlags () {\n    this._features = []\n    this._featuresIndex = {}\n  }\n\n  getContext () {\n    return this._context\n  }\n\n  setContext (c) {\n    this._context = c\n  }\n\n  _configure (opts, internalPlugins) {\n    const schema = reduce(internalPlugins, (schema, plugin) => {\n      if (plugin && plugin.configSchema) return assign({}, schema, plugin.configSchema)\n      return schema\n    }, this._schema)\n\n    // sendPayloadChecksums is false by default unless custom endpoints are not specified\n    if (!opts.endpoints) {\n      opts.sendPayloadChecksums = 'sendPayloadChecksums' in opts ? opts.sendPayloadChecksums : true\n    }\n\n    // accumulate configuration and error messages\n    const { errors, config } = reduce(keys(schema), (accum, key) => {\n      const defaultValue = schema[key].defaultValue(opts[key])\n\n      if (opts[key] !== undefined) {\n        const valid = schema[key].validate(opts[key])\n        if (!valid) {\n          accum.errors[key] = schema[key].message\n          accum.config[key] = defaultValue\n        } else {\n          if (schema[key].allowPartialObject) {\n            accum.config[key] = assign(defaultValue, opts[key])\n          } else {\n            accum.config[key] = opts[key]\n          }\n        }\n      } else {\n        accum.config[key] = defaultValue\n      }\n\n      return accum\n    }, { errors: {}, config: {} })\n\n    if (schema.apiKey) {\n      // missing api key is the only fatal error\n      if (!config.apiKey) throw new Error('No Bugsnag API Key set')\n      // warn about an apikey that is not of the expected format\n      if (!/^[0-9a-f]{32}$/i.test(config.apiKey)) errors.apiKey = 'should be a string of 32 hexadecimal characters'\n\n      if (opts.endpoints === undefined && config.apiKey.startsWith(HUB_PREFIX)) {\n        config.endpoints = {\n          notify: HUB_NOTIFY,\n          sessions: HUB_SESSION\n        }\n      }\n    }\n\n    // update and elevate some options\n    this._metadata = assign({}, config.metadata)\n    merge(this._features, config.featureFlags, this._featuresIndex)\n    this._user = assign({}, config.user)\n    this._context = config.context\n    if (config.logger) this._logger = config.logger\n\n    // add callbacks\n    if (config.onError) this._cbs.e = this._cbs.e.concat(config.onError)\n    if (config.onBreadcrumb) this._cbs.b = this._cbs.b.concat(config.onBreadcrumb)\n    if (config.onSession) this._cbs.s = this._cbs.s.concat(config.onSession)\n\n    // finally warn about any invalid config where we fell back to the default\n    if (keys(errors).length) {\n      this._logger.warn(generateConfigErrorMessage(errors, opts))\n    }\n\n    return config\n  }\n\n  getUser () {\n    return this._user\n  }\n\n  setUser (id, email, name) {\n    this._user = { id, email, name }\n  }\n\n  _loadPlugin (plugin) {\n    const result = plugin.load(this)\n    // JS objects are not the safest way to store arbitrarily keyed values,\n    // so bookend the key with some characters that prevent tampering with\n    // stuff like __proto__ etc. (only store the result if the plugin had a\n    // name)\n    if (plugin.name) this._plugins[`~${plugin.name}~`] = result\n  }\n\n  getPlugin (name) {\n    return this._plugins[`~${name}~`]\n  }\n\n  _setDelivery (d) {\n    this._delivery = d(this)\n  }\n\n  startSession () {\n    const session = new Session()\n\n    session.app.releaseStage = this._config.releaseStage\n    session.app.version = this._config.appVersion\n    session.app.type = this._config.appType\n\n    session._user = assign({}, this._user)\n\n    // run onSession callbacks\n    const ignore = runSyncCallbacks(this._cbs.s, session, 'onSession', this._logger)\n\n    if (ignore) {\n      this._logger.debug('Session not started due to onSession callback')\n      return this\n    }\n\n    return this._sessionDelegate.startSession(this, session)\n  }\n\n  addOnError (fn, front = false) {\n    this._cbs.e[front ? 'unshift' : 'push'](fn)\n  }\n\n  removeOnError (fn) {\n    this._cbs.e = filter(this._cbs.e, f => f !== fn)\n  }\n\n  _addOnSessionPayload (fn) {\n    this._cbs.sp.push(fn)\n  }\n\n  addOnSession (fn) {\n    this._cbs.s.push(fn)\n  }\n\n  removeOnSession (fn) {\n    this._cbs.s = filter(this._cbs.s, f => f !== fn)\n  }\n\n  addOnBreadcrumb (fn, front = false) {\n    this._cbs.b[front ? 'unshift' : 'push'](fn)\n  }\n\n  removeOnBreadcrumb (fn) {\n    this._cbs.b = filter(this._cbs.b, f => f !== fn)\n  }\n\n  pauseSession () {\n    return this._sessionDelegate.pauseSession(this)\n  }\n\n  resumeSession () {\n    return this._sessionDelegate.resumeSession(this)\n  }\n\n  leaveBreadcrumb (message, metadata, type) {\n    // coerce bad values so that the defaults get set\n    message = typeof message === 'string' ? message : ''\n    type = (typeof type === 'string' && includes(BREADCRUMB_TYPES, type)) ? type : 'manual'\n    metadata = typeof metadata === 'object' && metadata !== null ? metadata : {}\n\n    // if no message, discard\n    if (!message) return\n\n    const crumb = new Breadcrumb(message, metadata, type)\n\n    // run onBreadcrumb callbacks\n    const ignore = runSyncCallbacks(this._cbs.b, crumb, 'onBreadcrumb', this._logger)\n\n    if (ignore) {\n      this._logger.debug('Breadcrumb not attached due to onBreadcrumb callback')\n      return\n    }\n\n    // push the valid crumb onto the queue and maintain the length\n    this._breadcrumbs.push(crumb)\n    if (this._breadcrumbs.length > this._config.maxBreadcrumbs) {\n      this._breadcrumbs = this._breadcrumbs.slice(this._breadcrumbs.length - this._config.maxBreadcrumbs)\n    }\n  }\n\n  _isBreadcrumbTypeEnabled (type) {\n    const types = this._config.enabledBreadcrumbTypes\n\n    return types === null || includes(types, type)\n  }\n\n  notify (maybeError, onError, postReportCallback = noop) {\n    const event = Event.create(maybeError, true, undefined, 'notify()', this._depth + 1, this._logger)\n    this._notify(event, onError, postReportCallback)\n  }\n\n  _notify (event, onError, postReportCallback = noop) {\n    event.app = assign({}, event.app, {\n      releaseStage: this._config.releaseStage,\n      version: this._config.appVersion,\n      type: this._config.appType\n    })\n    event.context = event.context || this._context\n    event._metadata = assign({}, event._metadata, this._metadata)\n    event._user = assign({}, event._user, this._user)\n    event.breadcrumbs = this._breadcrumbs.slice()\n    merge(event._features, this._features, event._featuresIndex)\n\n    // exit early if events should not be sent on the current releaseStage\n    if (this._config.enabledReleaseStages !== null && !includes(this._config.enabledReleaseStages, this._config.releaseStage)) {\n      this._logger.warn('Event not sent due to releaseStage/enabledReleaseStages configuration')\n      return postReportCallback(null, event)\n    }\n\n    const originalSeverity = event.severity\n\n    const onCallbackError = err => {\n      // errors in callbacks are tolerated but we want to log them out\n      this._logger.error('Error occurred in onError callback, continuing anyway')\n      this._logger.error(err)\n    }\n\n    const callbacks = [].concat(this._cbs.e).concat(onError)\n    runCallbacks(callbacks, event, onCallbackError, (err, shouldSend) => {\n      if (err) onCallbackError(err)\n\n      if (!shouldSend) {\n        this._logger.debug('Event not sent due to onError callback')\n        return postReportCallback(null, event)\n      }\n\n      if (this._isBreadcrumbTypeEnabled('error')) {\n        // only leave a crumb for the error if actually got sent\n        Client.prototype.leaveBreadcrumb.call(this, event.errors[0].errorClass, {\n          errorClass: event.errors[0].errorClass,\n          errorMessage: event.errors[0].errorMessage,\n          severity: event.severity\n        }, 'error')\n      }\n\n      if (originalSeverity !== event.severity) {\n        event._handledState.severityReason = { type: 'userCallbackSetSeverity' }\n      }\n\n      if (event.unhandled !== event._handledState.unhandled) {\n        event._handledState.severityReason.unhandledOverridden = true\n        event._handledState.unhandled = event.unhandled\n      }\n\n      if (this._session) {\n        this._session._track(event)\n        event._session = this._session\n      }\n\n      this._delivery.sendEvent({\n        apiKey: event.apiKey || this._config.apiKey,\n        notifier: this._notifier,\n        events: [event]\n      }, (err) => postReportCallback(err, event))\n    })\n  }\n}\n\nconst generateConfigErrorMessage = (errors, rawInput) => {\n  const er = new Error(\n    `Invalid configuration\\n${map(keys(errors), key => `  - ${key} ${errors[key]}, got ${stringify(rawInput[key])}`).join('\\n\\n')}`)\n  return er\n}\n\nconst stringify = val => {\n  switch (typeof val) {\n    case 'string':\n    case 'number':\n    case 'object':\n      return JSON.stringify(val)\n    default: return String(val)\n  }\n}\n\nmodule.exports = Client\n","const some = require('./async-every')\n\nmodule.exports = (callbacks, event, onCallbackError, cb) => {\n  // This function is how we support different kinds of callback:\n  //  - synchronous - return value\n  //  - node-style async with callback - cb(err, value)\n  //  - promise/thenable - resolve(value)\n  // It normalises each of these into the lowest common denominator  a node-style callback\n  const runMaybeAsyncCallback = (fn, cb) => {\n    if (typeof fn !== 'function') return cb(null)\n    try {\n      // if function appears sync\n      if (fn.length !== 2) {\n        const ret = fn(event)\n        // check if it returned a \"thenable\" (promise)\n        if (ret && typeof ret.then === 'function') {\n          return ret.then(\n            // resolve\n            val => setTimeout(() => cb(null, val)),\n            // reject\n            err => {\n              setTimeout(() => {\n                onCallbackError(err)\n                return cb(null, true)\n              })\n            }\n          )\n        }\n        return cb(null, ret)\n      }\n      // if function is async\n      fn(event, (err, result) => {\n        if (err) {\n          onCallbackError(err)\n          return cb(null)\n        }\n        cb(null, result)\n      })\n    } catch (e) {\n      onCallbackError(e)\n      cb(null)\n    }\n  }\n\n  some(callbacks, runMaybeAsyncCallback, cb)\n}\n","// This is a heavily modified/simplified version of\n//   https://github.com/othiym23/async-some\n// with the logic flipped so that it is akin to the\n// synchronous \"every\" method instead of \"some\".\n\n// run the asynchronous test function (fn) over each item in the array (arr)\n// in series until:\n//   - fn(item, cb) => calls cb(null, false)\n//   - or the end of the array is reached\n// the callback (cb) will be passed (null, false) if any of the items in arr\n// caused fn to call back with false, otherwise it will be passed (null, true)\nmodule.exports = (arr, fn, cb) => {\n  let index = 0\n\n  const next = () => {\n    if (index >= arr.length) return cb(null, true)\n    fn(arr[index], (err, result) => {\n      if (err) return cb(err)\n      if (result === false) return cb(null, false)\n      index++\n      next()\n    })\n  }\n\n  next()\n}\n","const jsonStringify = require('@bugsnag/safe-json-stringify')\nconst EVENT_REDACTION_PATHS = [\n  'events.[].metaData',\n  'events.[].breadcrumbs.[].metaData',\n  'events.[].request'\n]\n\nmodule.exports.event = (event, redactedKeys) => {\n  let payload = jsonStringify(event, null, null, { redactedPaths: EVENT_REDACTION_PATHS, redactedKeys })\n  if (payload.length > 10e5) {\n    event.events[0]._metadata = {\n      notifier:\n`WARNING!\nSerialized payload was ${payload.length / 10e5}MB (limit = 1MB)\nmetadata was removed`\n    }\n    payload = jsonStringify(event, null, null, { redactedPaths: EVENT_REDACTION_PATHS, redactedKeys })\n  }\n  return payload\n}\n\nmodule.exports.session = (session, redactedKeys) => {\n  const payload = jsonStringify(session, null, null)\n  return payload\n}\n","const payload = require('@bugsnag/core/lib/json-payload')\n\nmodule.exports = (client, win = window) => ({\n  sendEvent: (event, cb = () => {}) => {\n    if (client._config.endpoints.notify === null) {\n      const err = new Error('Event not sent due to incomplete endpoint configuration')\n      return cb(err)\n    }\n\n    const url = getApiUrl(client._config, 'notify', '4', win)\n    const body = payload.event(event, client._config.redactedKeys)\n\n    const req = new win.XDomainRequest()\n    req.onload = function () {\n      cb(null)\n    }\n    req.onerror = function () {\n      const err = new Error('Event failed to send')\n      client._logger.error('Event failed to send', err)\n      if (body.length > 10e5) {\n        client._logger.warn(`Event oversized (${(body.length / 10e5).toFixed(2)} MB)`)\n      }\n      cb(err)\n    }\n    req.open('POST', url)\n    setTimeout(() => {\n      try {\n        req.send(body)\n      } catch (e) {\n        client._logger.error(e)\n        cb(e)\n      }\n    }, 0)\n  },\n  sendSession: (session, cb = () => {}) => {\n    if (client._config.endpoints.sessions === null) {\n      const err = new Error('Session not sent due to incomplete endpoint configuration')\n      return cb(err)\n    }\n\n    const url = getApiUrl(client._config, 'sessions', '1', win)\n    const req = new win.XDomainRequest()\n    req.onload = function () {\n      cb(null)\n    }\n    req.open('POST', url)\n    setTimeout(() => {\n      try {\n        req.send(payload.session(session, client._config.redactedKeys))\n      } catch (e) {\n        client._logger.error(e)\n        cb(e)\n      }\n    }, 0)\n  }\n})\n\nconst getApiUrl = (config, endpoint, version, win) => {\n  // IE8 doesn't support Date.prototype.toISOstring(), but it does convert a date\n  // to an ISO string when you use JSON stringify. Simply parsing the result of\n  // JSON.stringify is smaller than using a toISOstring() polyfill.\n  const isoDate = JSON.parse(JSON.stringify(new Date()))\n  const url = matchPageProtocol(config.endpoints[endpoint], win.location.protocol)\n  return `${url}?apiKey=${encodeURIComponent(config.apiKey)}&payloadVersion=${version}&sentAt=${encodeURIComponent(isoDate)}`\n}\n\nconst matchPageProtocol = module.exports._matchPageProtocol = (endpoint, pageProtocol) =>\n  pageProtocol === 'http:'\n    ? endpoint.replace(/^https:/, 'http:')\n    : endpoint\n","const payload = require('@bugsnag/core/lib/json-payload')\n\nfunction getIntegrityHeaderValue (windowOrWorkerGlobalScope, requestBody) {\n  if (windowOrWorkerGlobalScope.isSecureContext && windowOrWorkerGlobalScope.crypto && windowOrWorkerGlobalScope.crypto.subtle && windowOrWorkerGlobalScope.crypto.subtle.digest && typeof TextEncoder === 'function') {\n    const msgUint8 = new TextEncoder().encode(requestBody)\n    return windowOrWorkerGlobalScope.crypto.subtle.digest('SHA-1', msgUint8).then((hashBuffer) => {\n      const hashArray = Array.from(new Uint8Array(hashBuffer))\n      const hashHex = hashArray\n        .map((b) => b.toString(16).padStart(2, '0'))\n        .join('')\n\n      return 'sha1 ' + hashHex\n    })\n  }\n  return Promise.resolve()\n}\n\nmodule.exports = (client, win = window) => ({\n  sendEvent: (event, cb = () => {}) => {\n    try {\n      const url = client._config.endpoints.notify\n      if (url === null) {\n        const err = new Error('Event not sent due to incomplete endpoint configuration')\n        return cb(err)\n      }\n      const req = new win.XMLHttpRequest()\n      const body = payload.event(event, client._config.redactedKeys)\n\n      req.onreadystatechange = function () {\n        if (req.readyState === win.XMLHttpRequest.DONE) {\n          const status = req.status\n          if (status === 0 || status >= 400) {\n            const err = new Error(`Request failed with status ${status}`)\n            client._logger.error('Event failed to send', err)\n            if (body.length > 10e5) {\n              client._logger.warn(`Event oversized (${(body.length / 10e5).toFixed(2)} MB)`)\n            }\n            cb(err)\n          } else {\n            cb(null)\n          }\n        }\n      }\n\n      req.open('POST', url)\n      req.setRequestHeader('Content-Type', 'application/json')\n      req.setRequestHeader('Bugsnag-Api-Key', event.apiKey || client._config.apiKey)\n      req.setRequestHeader('Bugsnag-Payload-Version', '4')\n      req.setRequestHeader('Bugsnag-Sent-At', (new Date()).toISOString())\n\n      if (client._config.sendPayloadChecksums && typeof Promise !== 'undefined' && Promise.toString().indexOf('[native code]') !== -1) {\n        getIntegrityHeaderValue(win, body).then((integrity) => {\n          if (integrity) {\n            req.setRequestHeader('Bugsnag-Integrity', integrity)\n          }\n          req.send(body)\n        }).catch((err) => {\n          client._logger.error(err)\n          req.send(body)\n        })\n      } else {\n        req.send(body)\n      }\n    } catch (e) {\n      client._logger.error(e)\n    }\n  },\n  sendSession: (session, cb = () => {}) => {\n    try {\n      const url = client._config.endpoints.sessions\n      if (url === null) {\n        const err = new Error('Session not sent due to incomplete endpoint configuration')\n        return cb(err)\n      }\n      const req = new win.XMLHttpRequest()\n      const body = payload.session(session, client._config.redactedKeys)\n\n      req.onreadystatechange = function () {\n        if (req.readyState === win.XMLHttpRequest.DONE) {\n          const status = req.status\n          if (status === 0 || status >= 400) {\n            const err = new Error(`Request failed with status ${status}`)\n            client._logger.error('Session failed to send', err)\n            cb(err)\n          } else {\n            cb(null)\n          }\n        }\n      }\n\n      req.open('POST', url)\n      req.setRequestHeader('Content-Type', 'application/json')\n      req.setRequestHeader('Bugsnag-Api-Key', client._config.apiKey)\n      req.setRequestHeader('Bugsnag-Payload-Version', '1')\n      req.setRequestHeader('Bugsnag-Sent-At', (new Date()).toISOString())\n\n      if (client._config.sendPayloadChecksums && typeof Promise !== 'undefined' && Promise.toString().indexOf('[native code]') !== -1) {\n        getIntegrityHeaderValue(win, body).then((integrity) => {\n          if (integrity) {\n            req.setRequestHeader('Bugsnag-Integrity', integrity)\n          }\n          req.send(body)\n        }).catch((err) => {\n          client._logger.error(err)\n          req.send(body)\n        })\n      } else {\n        req.send(body)\n      }\n    } catch (e) {\n      client._logger.error(e)\n    }\n  }\n})\n","let appStart = new Date()\nconst reset = () => { appStart = new Date() }\n\nmodule.exports = {\n  name: 'appDuration',\n  load: client => {\n    client.addOnError(event => {\n      const now = new Date()\n\n      event.app.duration = now - appStart\n    }, true)\n\n    return { reset }\n  }\n}\n","const assign = require('@bugsnag/core/lib/es-utils/assign')\nconst BUGSNAG_ANONYMOUS_ID_KEY = 'bugsnag-anonymous-id'\n\nconst getDeviceId = (win) => {\n  try {\n    const storage = win.localStorage\n\n    let id = storage.getItem(BUGSNAG_ANONYMOUS_ID_KEY)\n\n    // If we get an ID, make sure it looks like a valid cuid. The length can\n    // fluctuate slightly, so some leeway is built in\n    if (id && /^c[a-z0-9]{20,32}$/.test(id)) {\n      return id\n    }\n\n    const cuid = require('@bugsnag/cuid')\n    id = cuid()\n\n    storage.setItem(BUGSNAG_ANONYMOUS_ID_KEY, id)\n\n    return id\n  } catch (err) {\n    // If localStorage is not available (e.g. because it's disabled) then give up\n  }\n}\n\n/*\n * Automatically detects browser device details\n */\nmodule.exports = (nav = navigator, win = window) => ({\n  load: (client) => {\n    const device = {\n      locale: nav.browserLanguage || nav.systemLanguage || nav.userLanguage || nav.language,\n      userAgent: nav.userAgent\n    }\n\n    if (win && win.screen && win.screen.orientation && win.screen.orientation.type) {\n      device.orientation = win.screen.orientation.type\n    } else if (win && win.document) {\n      device.orientation =\n        win.document.documentElement.clientWidth > win.document.documentElement.clientHeight\n          ? 'landscape'\n          : 'portrait'\n    }\n\n    if (client._config.generateAnonymousId) {\n      device.id = getDeviceId(win)\n    }\n\n    client.addOnSession(session => {\n      session.device = assign({}, session.device, device)\n      // only set device id if collectUserIp is false\n      if (!client._config.collectUserIp) setDefaultUserId(session)\n    })\n\n    // add time just as the event is sent\n    client.addOnError((event) => {\n      event.device = assign({},\n        event.device,\n        device,\n        { time: new Date() }\n      )\n      if (!client._config.collectUserIp) setDefaultUserId(event)\n    }, true)\n  },\n  configSchema: {\n    generateAnonymousId: {\n      validate: value => value === true || value === false,\n      defaultValue: () => true,\n      message: 'should be true|false'\n    }\n  }\n})\n\nconst setDefaultUserId = (eventOrSession) => {\n  // device id is also used to populate the user id field, if it's not already set\n  const user = eventOrSession.getUser()\n  if (!user || !user.id) {\n    eventOrSession.setUser(eventOrSession.device.id)\n  }\n}\n","const includes = require('@bugsnag/core/lib/es-utils/includes')\n\nmodule.exports = {\n  load: client => { client._sessionDelegate = sessionDelegate }\n}\n\nconst sessionDelegate = {\n  startSession: (client, session) => {\n    const sessionClient = client\n    sessionClient._session = session\n    sessionClient._pausedSession = null\n\n    // exit early if the current releaseStage is not enabled\n    if (sessionClient._config.enabledReleaseStages !== null && !includes(sessionClient._config.enabledReleaseStages, sessionClient._config.releaseStage)) {\n      sessionClient._logger.warn('Session not sent due to releaseStage/enabledReleaseStages configuration')\n      return sessionClient\n    }\n\n    sessionClient._delivery.sendSession({\n      notifier: sessionClient._notifier,\n      device: session.device,\n      app: session.app,\n      sessions: [\n        {\n          id: session.id,\n          startedAt: session.startedAt,\n          user: session._user\n        }\n      ]\n    })\n    return sessionClient\n  },\n  resumeSession: (client) => {\n    // Do nothing if there's already an active session\n    if (client._session) {\n      return client\n    }\n\n    // If we have a paused session then make it the active session\n    if (client._pausedSession) {\n      client._session = client._pausedSession\n      client._pausedSession = null\n\n      return client\n    }\n\n    // Otherwise start a new session\n    return client.startSession()\n  },\n  pauseSession: (client) => {\n    client._pausedSession = client._session\n    client._session = null\n  }\n}\n","const assign = require('@bugsnag/core/lib/es-utils/assign')\n\n/*\n * Prevent collection of user IPs\n */\nmodule.exports = {\n  load: (client) => {\n    if (client._config.collectUserIp) return\n\n    client.addOnError(event => {\n      // If user.id is explicitly undefined, it will be missing from the payload. It needs\n      // removing so that the following line replaces it\n      if (event._user && typeof event._user.id === 'undefined') delete event._user.id\n      event._user = assign({ id: '[REDACTED]' }, event._user)\n      event.request = assign({ clientIp: '[REDACTED]' }, event.request)\n    })\n  },\n  configSchema: {\n    collectUserIp: {\n      defaultValue: () => true,\n      message: 'should be true|false',\n      validate: value => value === true || value === false\n    }\n  }\n}\n","const map = require('@bugsnag/core/lib/es-utils/map')\nconst reduce = require('@bugsnag/core/lib/es-utils/reduce')\nconst filter = require('@bugsnag/core/lib/es-utils/filter')\n\n/*\n * Leaves breadcrumbs when console log methods are called\n */\nexports.load = (client) => {\n  const isDev = /^(local-)?dev(elopment)?$/.test(client._config.releaseStage)\n\n  if (isDev || !client._isBreadcrumbTypeEnabled('log')) return\n\n  map(CONSOLE_LOG_METHODS, method => {\n    const original = console[method]\n    console[method] = (...args) => {\n      client.leaveBreadcrumb('Console output', reduce(args, (accum, arg, i) => {\n        // do the best/simplest stringification of each argument\n        let stringified = '[Unknown value]'\n        // this may fail if the input is:\n        // - an object whose [[Prototype]] is null (no toString)\n        // - an object with a broken toString or @@toPrimitive implementation\n        try { stringified = String(arg) } catch (e) {}\n        // if it stringifies to [object Object] attempt to JSON stringify\n        if (stringified === '[object Object]') {\n          // catch stringify errors and fallback to [object Object]\n          try { stringified = JSON.stringify(arg) } catch (e) {}\n        }\n        accum[`[${i}]`] = stringified\n        return accum\n      }, {\n        severity: method.indexOf('group') === 0 ? 'log' : method\n      }), 'log')\n      original.apply(console, args)\n    }\n    console[method]._restore = () => { console[method] = original }\n  })\n}\n\nif (process.env.NODE_ENV !== 'production') {\n  exports.destroy = () => CONSOLE_LOG_METHODS.forEach(method => {\n    if (typeof console[method]._restore === 'function') console[method]._restore()\n  })\n}\n\nconst CONSOLE_LOG_METHODS = filter(['log', 'debug', 'info', 'warn', 'error'], method =>\n  typeof console !== 'undefined' && typeof console[method] === 'function'\n)\n","const map = require('@bugsnag/core/lib/es-utils/map')\nconst reduce = require('@bugsnag/core/lib/es-utils/reduce')\nconst filter = require('@bugsnag/core/lib/es-utils/filter')\n\nconst MAX_LINE_LENGTH = 200\nconst MAX_SCRIPT_LENGTH = 500000\n\nmodule.exports = (doc = document, win = window) => ({\n  load: (client) => {\n    if (!client._config.trackInlineScripts) return\n\n    const originalLocation = win.location.href\n    let html = ''\n\n    // in IE8-10 the 'interactive' state can fire too soon (before scripts have finished executing), so in those\n    // we wait for the 'complete' state before assuming that synchronous scripts are no longer executing\n    const isOldIe = !!doc.attachEvent\n    let DOMContentLoaded = isOldIe ? doc.readyState === 'complete' : doc.readyState !== 'loading'\n    const getHtml = () => doc.documentElement.outerHTML\n\n    // get whatever HTML exists at this point in time\n    html = getHtml()\n    const prev = doc.onreadystatechange\n    // then update it when the DOM content has loaded\n    doc.onreadystatechange = function () {\n      // IE8 compatible alternative to document#DOMContentLoaded\n      if (doc.readyState === 'interactive') {\n        html = getHtml()\n        DOMContentLoaded = true\n      }\n      try { prev.apply(this, arguments) } catch (e) {}\n    }\n\n    let _lastScript = null\n    const updateLastScript = script => {\n      _lastScript = script\n    }\n\n    const getCurrentScript = () => {\n      let script = doc.currentScript || _lastScript\n      if (!script && !DOMContentLoaded) {\n        const scripts = doc.scripts || doc.getElementsByTagName('script')\n        script = scripts[scripts.length - 1]\n      }\n      return script\n    }\n\n    const addSurroundingCode = lineNumber => {\n      // get whatever html has rendered at this point\n      if (!DOMContentLoaded || !html) html = getHtml()\n      // simulate the raw html\n      const htmlLines = ['<!-- DOC START -->'].concat(html.split('\\n'))\n      const zeroBasedLine = lineNumber - 1\n      const start = Math.max(zeroBasedLine - 3, 0)\n      const end = Math.min(zeroBasedLine + 3, htmlLines.length)\n      return reduce(htmlLines.slice(start, end), (accum, line, i) => {\n        accum[start + 1 + i] = line.length <= MAX_LINE_LENGTH ? line : line.substr(0, MAX_LINE_LENGTH)\n        return accum\n      }, {})\n    }\n\n    client.addOnError(event => {\n      // remove any of our own frames that may be part the stack this\n      // happens before the inline script check as it happens for all errors\n      event.errors[0].stacktrace = filter(event.errors[0].stacktrace, f => !(/__trace__$/.test(f.method)))\n\n      const frame = event.errors[0].stacktrace[0]\n\n      // remove hash and query string from url\n      const cleanUrl = (url) => url.replace(/#.*$/, '').replace(/\\?.*$/, '')\n\n      // if frame.file exists and is not the original location of the page, this can't be an inline script\n      if (frame && frame.file && cleanUrl(frame.file) !== cleanUrl(originalLocation)) return\n\n      // grab the last script known to have run\n      const currentScript = getCurrentScript()\n      if (currentScript) {\n        const content = currentScript.innerHTML\n        event.addMetadata(\n          'script',\n          'content',\n          content.length <= MAX_SCRIPT_LENGTH ? content : content.substr(0, MAX_SCRIPT_LENGTH)\n        )\n\n        // only attempt to grab some surrounding code if we have a line number\n        if (frame && frame.lineNumber) {\n          frame.code = addSurroundingCode(frame.lineNumber)\n        }\n      }\n    }, true)\n\n    // Proxy all the timer functions whose callback is their 0th argument.\n    // Keep a reference to the original setTimeout because we need it later\n    const [_setTimeout] = map([\n      'setTimeout',\n      'setInterval',\n      'setImmediate',\n      'requestAnimationFrame'\n    ], fn =>\n      __proxy(win, fn, original =>\n        __traceOriginalScript(original, args => ({\n          get: () => args[0],\n          replace: fn => { args[0] = fn }\n        }))\n      )\n    )\n\n    // Proxy all the host objects whose prototypes have an addEventListener function\n    map([\n      'EventTarget', 'Window', 'Node', 'ApplicationCache', 'AudioTrackList', 'ChannelMergerNode',\n      'CryptoOperation', 'EventSource', 'FileReader', 'HTMLUnknownElement', 'IDBDatabase',\n      'IDBRequest', 'IDBTransaction', 'KeyOperation', 'MediaController', 'MessagePort', 'ModalWindow',\n      'Notification', 'SVGElementInstance', 'Screen', 'TextTrack', 'TextTrackCue', 'TextTrackList',\n      'WebSocket', 'WebSocketWorker', 'Worker', 'XMLHttpRequest', 'XMLHttpRequestEventTarget', 'XMLHttpRequestUpload'\n    ], o => {\n      if (!win[o] || !win[o].prototype || !Object.prototype.hasOwnProperty.call(win[o].prototype, 'addEventListener')) return\n      __proxy(win[o].prototype, 'addEventListener', original =>\n        __traceOriginalScript(original, eventTargetCallbackAccessor)\n      )\n      __proxy(win[o].prototype, 'removeEventListener', original =>\n        __traceOriginalScript(original, eventTargetCallbackAccessor, true)\n      )\n    })\n\n    function __traceOriginalScript (fn, callbackAccessor, alsoCallOriginal = false) {\n      return function () {\n        // this is required for removeEventListener to remove anything added with\n        // addEventListener before the functions started being wrapped by Bugsnag\n        const args = [].slice.call(arguments)\n        try {\n          const cba = callbackAccessor(args)\n          const cb = cba.get()\n          if (alsoCallOriginal) fn.apply(this, args)\n          if (typeof cb !== 'function') return fn.apply(this, args)\n          if (cb.__trace__) {\n            cba.replace(cb.__trace__)\n          } else {\n            const script = getCurrentScript()\n            // this function mustn't be annonymous due to a bug in the stack\n            // generation logic, meaning it gets tripped up\n            // see: https://github.com/stacktracejs/stack-generator/issues/6\n            cb.__trace__ = function __trace__ () {\n              // set the script that called this function\n              updateLastScript(script)\n              // immediately unset the currentScript synchronously below, however\n              // if this cb throws an error the line after will not get run so schedule\n              // an almost-immediate aysnc update too\n              _setTimeout(function () { updateLastScript(null) }, 0)\n              const ret = cb.apply(this, arguments)\n              updateLastScript(null)\n              return ret\n            }\n            cb.__trace__.__trace__ = cb.__trace__\n            cba.replace(cb.__trace__)\n          }\n        } catch (e) {\n          // swallow these errors on Selenium:\n          // Permission denied to access property '__trace__'\n          // WebDriverException: Message: Permission denied to access property \"handleEvent\"\n        }\n        // IE8 doesn't let you call .apply() on setTimeout/setInterval\n        if (fn.apply) return fn.apply(this, args)\n        switch (args.length) {\n          case 1: return fn(args[0])\n          case 2: return fn(args[0], args[1])\n          default: return fn()\n        }\n      }\n    }\n  },\n  configSchema: {\n    trackInlineScripts: {\n      validate: value => value === true || value === false,\n      defaultValue: () => true,\n      message: 'should be true|false'\n    }\n  }\n})\n\nfunction __proxy (host, name, replacer) {\n  const original = host[name]\n  if (!original) return original\n  const replacement = replacer(original)\n  host[name] = replacement\n  return original\n}\n\nfunction eventTargetCallbackAccessor (args) {\n  const isEventHandlerObj = !!args[1] && typeof args[1].handleEvent === 'function'\n  return {\n    get: function () {\n      return isEventHandlerObj ? args[1].handleEvent : args[1]\n    },\n    replace: function (fn) {\n      if (isEventHandlerObj) {\n        args[1].handleEvent = fn\n      } else {\n        args[1] = fn\n      }\n    }\n  }\n}\n","/*\n * Leaves breadcrumbs when the user interacts with the DOM\n */\nmodule.exports = (win = window) => ({\n  load: (client) => {\n    if (!('addEventListener' in win)) return\n    if (!client._isBreadcrumbTypeEnabled('user')) return\n\n    win.addEventListener('click', (event) => {\n      let targetText, targetSelector\n      try {\n        targetText = getNodeText(event.target)\n        targetSelector = getNodeSelector(event.target, win)\n      } catch (e) {\n        targetText = '[hidden]'\n        targetSelector = '[hidden]'\n        client._logger.error('Cross domain error when tracking click event. See docs: https://tinyurl.com/yy3rn63z')\n      }\n      client.leaveBreadcrumb('UI click', { targetText, targetSelector }, 'user')\n    }, true)\n  }\n})\n\nconst trim = /^\\s*([^\\s][\\s\\S]{0,139}[^\\s])?\\s*/\n\nfunction getNodeText (el) {\n  let text = el.textContent || el.innerText || ''\n\n  if (!text && (el.type === 'submit' || el.type === 'button')) {\n    text = el.value\n  }\n\n  text = text.replace(trim, '$1')\n\n  if (text.length > 140) {\n    return text.slice(0, 135) + '(...)'\n  }\n\n  return text\n}\n\n// Create a label from tagname, id and css class of the element\nfunction getNodeSelector (el, win) {\n  const parts = [el.tagName]\n  if (el.id) parts.push('#' + el.id)\n  if (el.className && el.className.length) parts.push(`.${el.className.split(' ').join('.')}`)\n  // Can't get much more advanced with the current browser\n  if (!win.document.querySelectorAll || !Array.prototype.indexOf) return parts.join('')\n  try {\n    if (win.document.querySelectorAll(parts.join('')).length === 1) return parts.join('')\n  } catch (e) {\n    // Sometimes the query selector can be invalid just return it as-is\n    return parts.join('')\n  }\n  // try to get a more specific selector if this one matches more than one element\n  if (el.parentNode.childNodes.length > 1) {\n    const index = Array.prototype.indexOf.call(el.parentNode.childNodes, el) + 1\n    parts.push(`:nth-child(${index})`)\n  }\n  if (win.document.querySelectorAll(parts.join('')).length === 1) return parts.join('')\n  // try prepending the parent node selector\n  if (el.parentNode) return `${getNodeSelector(el.parentNode, win)} > ${parts.join('')}`\n  return parts.join('')\n}\n","/*\n* Leaves breadcrumbs when navigation methods are called or events are emitted\n*/\nmodule.exports = (win = window) => {\n  const plugin = {\n    load: (client) => {\n      if (!('addEventListener' in win)) return\n      if (!client._isBreadcrumbTypeEnabled('navigation')) return\n\n      // returns a function that will drop a breadcrumb with a given name\n      const drop = name => () => client.leaveBreadcrumb(name, {}, 'navigation')\n\n      // simple drops  just names, no meta\n      win.addEventListener('pagehide', drop('Page hidden'), true)\n      win.addEventListener('pageshow', drop('Page shown'), true)\n      win.addEventListener('load', drop('Page loaded'), true)\n      win.document.addEventListener('DOMContentLoaded', drop('DOMContentLoaded'), true)\n      // some browsers like to emit popstate when the page loads, so only add the popstate listener after that\n      win.addEventListener('load', () => win.addEventListener('popstate', drop('Navigated back'), true))\n\n      // hashchange has some metadata that we care about\n      win.addEventListener('hashchange', event => {\n        const metadata = event.oldURL\n          ? { from: relativeLocation(event.oldURL, win), to: relativeLocation(event.newURL, win), state: getCurrentState(win) }\n          : { to: relativeLocation(win.location.href, win) }\n        client.leaveBreadcrumb('Hash changed', metadata, 'navigation')\n      }, true)\n\n      // the only way to know about replaceState/pushState is to wrap them >_<\n      if (win.history.pushState) wrapHistoryFn(client, win.history, 'pushState', win, true)\n      if (win.history.replaceState) wrapHistoryFn(client, win.history, 'replaceState', win)\n    }\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    plugin.destroy = (win = window) => {\n      win.history.replaceState._restore()\n      win.history.pushState._restore()\n    }\n  }\n\n  return plugin\n}\n\nif (process.env.NODE_ENV !== 'production') {\n  exports.destroy = (win = window) => {\n    win.history.replaceState._restore()\n    win.history.pushState._restore()\n  }\n}\n\n// takes a full url like http://foo.com:1234/pages/01.html?yes=no#section-2 and returns\n// just the path and hash parts, e.g. /pages/01.html?yes=no#section-2\nconst relativeLocation = (url, win) => {\n  const a = win.document.createElement('A')\n  a.href = url\n  return `${a.pathname}${a.search}${a.hash}`\n}\n\nconst stateChangeToMetadata = (win, state, title, url) => {\n  const currentPath = relativeLocation(win.location.href, win)\n  return { title, state, prevState: getCurrentState(win), to: url || currentPath, from: currentPath }\n}\n\nconst wrapHistoryFn = (client, target, fn, win, resetEventCount = false) => {\n  const orig = target[fn]\n  target[fn] = (state, title, url) => {\n    client.leaveBreadcrumb(`History ${fn}`, stateChangeToMetadata(win, state, title, url), 'navigation')\n    // if throttle plugin is in use, reset the event sent count\n    if (resetEventCount && typeof client.resetEventCount === 'function') client.resetEventCount()\n    // Internet Explorer will convert `undefined` to a string when passed, causing an unintended redirect\n    // to '/undefined'. therefore we only pass the url if it's not undefined.\n    orig.apply(target, [state, title].concat(url !== undefined ? url : []))\n  }\n  if (process.env.NODE_ENV !== 'production') {\n    target[fn]._restore = () => { target[fn] = orig }\n  }\n}\n\nconst getCurrentState = (win) => {\n  try {\n    return win.history.state\n  } catch (e) {}\n}\n","const BREADCRUMB_TYPE = 'request'\n\nconst includes = require('@bugsnag/core/lib/es-utils/includes')\n\n/*\n * Leaves breadcrumbs when network requests occur\n */\nmodule.exports = (_ignoredUrls = [], win = window) => {\n  let restoreFunctions = []\n  const plugin = {\n    load: client => {\n      if (!client._isBreadcrumbTypeEnabled('request')) return\n\n      const ignoredUrls = [\n        client._config.endpoints.notify,\n        client._config.endpoints.sessions\n      ].concat(_ignoredUrls)\n\n      monkeyPatchXMLHttpRequest()\n      monkeyPatchFetch()\n\n      // XMLHttpRequest monkey patch\n      function monkeyPatchXMLHttpRequest () {\n        if (!('addEventListener' in win.XMLHttpRequest.prototype) || !('WeakMap' in win)) return\n\n        const trackedRequests = new WeakMap()\n        const requestHandlers = new WeakMap()\n\n        const originalOpen = win.XMLHttpRequest.prototype.open\n        win.XMLHttpRequest.prototype.open = function open (method, url) {\n          // it's possible for `this` to be `undefined`, which is not a valid key for a WeakMap\n          if (this) {\n            trackedRequests.set(this, { method, url })\n          }\n          originalOpen.apply(this, arguments)\n        }\n\n        const originalSend = win.XMLHttpRequest.prototype.send\n        win.XMLHttpRequest.prototype.send = function send (body) {\n          const requestData = trackedRequests.get(this)\n          if (requestData) {\n          // if we have already setup listeners then this request instance is being reused,\n          // so we need to remove the listeners from the previous send\n            const listeners = requestHandlers.get(this)\n            if (listeners) {\n              this.removeEventListener('load', listeners.load)\n              this.removeEventListener('error', listeners.error)\n            }\n\n            const requestStart = new Date()\n            const error = () => handleXHRError(requestData.method, requestData.url, getDuration(requestStart))\n            const load = () => handleXHRLoad(requestData.method, requestData.url, this.status, getDuration(requestStart))\n\n            this.addEventListener('load', load)\n            this.addEventListener('error', error)\n            // it's possible for `this` to be `undefined`, which is not a valid key for a WeakMap\n            if (this) {\n              requestHandlers.set(this, { load, error })\n            }\n          }\n\n          originalSend.apply(this, arguments)\n        }\n\n        if (process.env.NODE_ENV !== 'production') {\n          restoreFunctions.push(() => {\n            win.XMLHttpRequest.prototype.open = originalOpen\n            win.XMLHttpRequest.prototype.send = originalSend\n          })\n        }\n      }\n\n      function handleXHRLoad (method, url, status, duration) {\n        if (url === undefined) {\n          client._logger.warn('The request URL is no longer present on this XMLHttpRequest. A breadcrumb cannot be left for this request.')\n          return\n        }\n\n        // an XMLHttpRequest's URL can be an object as long as its 'toString'\n        // returns a URL, e.g. a HTMLAnchorElement\n        if (typeof url === 'string' && includes(ignoredUrls, url.replace(/\\?.*$/, ''))) {\n          // don't leave a network breadcrumb from bugsnag notify calls\n          return\n        }\n        const metadata = {\n          status,\n          method: String(method),\n          url: String(url),\n          duration: duration\n        }\n        if (status >= 400) {\n          // contacted server but got an error response\n          client.leaveBreadcrumb('XMLHttpRequest failed', metadata, BREADCRUMB_TYPE)\n        } else {\n          client.leaveBreadcrumb('XMLHttpRequest succeeded', metadata, BREADCRUMB_TYPE)\n        }\n      }\n\n      function handleXHRError (method, url, duration) {\n        if (url === undefined) {\n          client._logger.warn('The request URL is no longer present on this XMLHttpRequest. A breadcrumb cannot be left for this request.')\n          return\n        }\n\n        if (typeof url === 'string' && includes(ignoredUrls, url.replace(/\\?.*$/, ''))) {\n          // don't leave a network breadcrumb from bugsnag notify calls\n          return\n        }\n\n        // failed to contact server\n        client.leaveBreadcrumb('XMLHttpRequest error', {\n          method: String(method),\n          url: String(url),\n          duration: duration\n        }, BREADCRUMB_TYPE)\n      }\n\n      // window.fetch monkey patch\n      function monkeyPatchFetch () {\n        // only patch it if it exists and if it is not a polyfill (patching a polyfilled\n        // fetch() results in duplicate breadcrumbs for the same request because the\n        // implementation uses XMLHttpRequest which is also patched)\n        if (!('fetch' in win) || win.fetch.polyfill) return\n\n        const oldFetch = win.fetch\n        win.fetch = function fetch () {\n          const urlOrRequest = arguments[0]\n          const options = arguments[1]\n\n          let method\n          let url = null\n\n          if (urlOrRequest && typeof urlOrRequest === 'object') {\n            url = urlOrRequest.url\n            if (options && 'method' in options) {\n              method = options.method\n            } else if (urlOrRequest && 'method' in urlOrRequest) {\n              method = urlOrRequest.method\n            }\n          } else {\n            url = urlOrRequest\n            if (options && 'method' in options) {\n              method = options.method\n            }\n          }\n\n          if (method === undefined) {\n            method = 'GET'\n          }\n\n          return new Promise((resolve, reject) => {\n            const requestStart = new Date()\n\n            // pass through to native fetch\n            oldFetch(...arguments)\n              .then(response => {\n                handleFetchSuccess(response, method, url, getDuration(requestStart))\n                resolve(response)\n              })\n              .catch(error => {\n                handleFetchError(method, url, getDuration(requestStart))\n                reject(error)\n              })\n          })\n        }\n\n        if (process.env.NODE_ENV !== 'production') {\n          restoreFunctions.push(() => {\n            win.fetch = oldFetch\n          })\n        }\n      }\n\n      const handleFetchSuccess = (response, method, url, duration) => {\n        const metadata = {\n          method: String(method),\n          status: response.status,\n          url: String(url),\n          duration: duration\n        }\n        if (response.status >= 400) {\n          // when the request comes back with a 4xx or 5xx status it does not reject the fetch promise,\n          client.leaveBreadcrumb('fetch() failed', metadata, BREADCRUMB_TYPE)\n        } else {\n          client.leaveBreadcrumb('fetch() succeeded', metadata, BREADCRUMB_TYPE)\n        }\n      }\n\n      const handleFetchError = (method, url, duration) => {\n        client.leaveBreadcrumb('fetch() error', { method: String(method), url: String(url), duration: duration }, BREADCRUMB_TYPE)\n      }\n    }\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    plugin.destroy = () => {\n      restoreFunctions.forEach(fn => fn())\n      restoreFunctions = []\n    }\n  }\n\n  return plugin\n}\n\nconst getDuration = (startTime) => startTime && new Date() - startTime\n","const intRange = require('@bugsnag/core/lib/validators/int-range')\n\n/*\n * Throttles and dedupes events\n */\n\nmodule.exports = {\n  load: (client) => {\n    // track sent events for each init of the plugin\n    let n = 0\n\n    // add onError hook\n    client.addOnError((event) => {\n      // have max events been sent already?\n      if (n >= client._config.maxEvents) {\n        client._logger.warn(`Cancelling event send due to maxEvents per session limit of ${client._config.maxEvents} being reached`)\n        return false\n      }\n      n++\n    })\n\n    client.resetEventCount = () => { n = 0 }\n  },\n  configSchema: {\n    maxEvents: {\n      defaultValue: () => 10,\n      message: 'should be a positive integer 100',\n      validate: val => intRange(1, 100)(val)\n    }\n  }\n}\n","/*\n * Remove query strings (and fragments) from stacktraces\n */\nconst map = require('@bugsnag/core/lib/es-utils/map')\nconst reduce = require('@bugsnag/core/lib/es-utils/reduce')\n\nmodule.exports = {\n  load: (client) => {\n    client.addOnError(event => {\n      const allFrames = reduce(event.errors, (accum, er) => accum.concat(er.stacktrace), [])\n      map(allFrames, frame => {\n        frame.file = strip(frame.file)\n      })\n    })\n  }\n}\n\nconst strip = module.exports._strip = str =>\n  typeof str === 'string'\n    ? str.replace(/\\?.*$/, '').replace(/#.*$/, '')\n    : str\n","/*\n * Automatically notifies Bugsnag when window.onerror is called\n */\n\nmodule.exports = (win = window, component = 'window onerror') => ({\n  load: (client) => {\n    if (!client._config.autoDetectErrors) return\n    if (!client._config.enabledErrorTypes.unhandledExceptions) return\n    function onerror (messageOrEvent, url, lineNo, charNo, error) {\n      // Ignore errors with no info due to CORS settings\n      if (lineNo === 0 && /Script error\\.?/.test(messageOrEvent)) {\n        client._logger.warn('Ignoring cross-domain or eval script error. See docs: https://tinyurl.com/yy3rn63z')\n      } else {\n        // any error sent to window.onerror is unhandled and has severity=error\n        const handledState = { severity: 'error', unhandled: true, severityReason: { type: 'unhandledException' } }\n\n        let event\n\n        // window.onerror can be called in a number of ways. This big if-else is how we\n        // figure out which arguments were supplied, and what kind of values it received.\n\n        if (error) {\n          // if the last parameter (error) was supplied, this is a modern browser's\n          // way of saying \"this value was thrown and not caught\"\n          event = client.Event.create(error, true, handledState, component, 1)\n          decorateStack(event.errors[0].stacktrace, url, lineNo, charNo)\n        } else if (\n          // This complex case detects \"error\" events that are typically synthesised\n          // by jquery's trigger method (although can be created in other ways). In\n          // order to detect this:\n          // - the first argument (message) must exist and be an object (most likely it's a jQuery event)\n          // - the second argument (url) must either not exist or be something other than a string (if it\n          //    exists and is not a string, it'll be the extraParameters argument from jQuery's trigger()\n          //    function)\n          // - the third, fourth and fifth arguments must not exist (lineNo, charNo and error)\n          (typeof messageOrEvent === 'object' && messageOrEvent !== null) &&\n          (!url || typeof url !== 'string') &&\n          !lineNo && !charNo && !error\n        ) {\n          // The jQuery event may have a \"type\" property, if so use it as part of the error message\n          const name = messageOrEvent.type ? `Event: ${messageOrEvent.type}` : 'Error'\n          // attempt to find a message from one of the conventional properties, but\n          // default to empty string (the event will fill it with a placeholder)\n          const message = messageOrEvent.message || messageOrEvent.detail || ''\n\n          event = client.Event.create({ name, message }, true, handledState, component, 1)\n\n          // provide the original thing onerror received  not our error-like object we passed to _notify\n          event.originalError = messageOrEvent\n\n          // include the raw input as metadata  it might contain more info than we extracted\n          event.addMetadata(component, { event: messageOrEvent, extraParameters: url })\n        } else {\n          // Lastly, if there was no \"error\" parameter this event was probably from an old\n          // browser that doesn't support that. Instead we need to generate a stacktrace.\n          event = client.Event.create(messageOrEvent, true, handledState, component, 1)\n          decorateStack(event.errors[0].stacktrace, url, lineNo, charNo)\n        }\n\n        client._notify(event)\n      }\n\n      if (typeof prevOnError === 'function') prevOnError.apply(this, arguments)\n    }\n\n    const prevOnError = win.onerror\n    win.onerror = onerror\n  }\n})\n\n// Sometimes the stacktrace has less information than was passed to window.onerror.\n// This function will augment the first stackframe with any useful info that was\n// received as arguments to the onerror callback.\nconst decorateStack = (stack, url, lineNo, charNo) => {\n  if (!stack[0]) stack.push({})\n  const culprit = stack[0]\n  if (!culprit.file && typeof url === 'string') culprit.file = url\n  if (!culprit.lineNumber && isActualNumber(lineNo)) culprit.lineNumber = lineNo\n  if (!culprit.columnNumber) {\n    if (isActualNumber(charNo)) {\n      culprit.columnNumber = charNo\n    } else if (window.event && isActualNumber(window.event.errorCharacter)) {\n      culprit.columnNumber = window.event.errorCharacter\n    }\n  }\n}\n\nconst isActualNumber = (n) => typeof n === 'number' && String.call(n) !== 'NaN'\n","const map = require('@bugsnag/core/lib/es-utils/map')\nconst isError = require('@bugsnag/core/lib/iserror')\n\nlet _listener\n/*\n * Automatically notifies Bugsnag when window.onunhandledrejection is called\n */\nmodule.exports = (win = window) => {\n  const plugin = {\n    load: (client) => {\n      if (!client._config.autoDetectErrors || !client._config.enabledErrorTypes.unhandledRejections) return\n      const listener = evt => {\n        let error = evt.reason\n        let isBluebird = false\n\n        // accessing properties on evt.detail can throw errors (see #394)\n        try {\n          if (evt.detail && evt.detail.reason) {\n            error = evt.detail.reason\n            isBluebird = true\n          }\n        } catch (e) {}\n\n        // Report unhandled promise rejections as handled if the user has configured it\n        const unhandled = !client._config.reportUnhandledPromiseRejectionsAsHandled\n\n        const event = client.Event.create(error, false, {\n          severity: 'error',\n          unhandled,\n          severityReason: { type: 'unhandledPromiseRejection' }\n        }, 'unhandledrejection handler', 1, client._logger)\n\n        if (isBluebird) {\n          map(event.errors[0].stacktrace, fixBluebirdStacktrace(error))\n        }\n\n        client._notify(event, (event) => {\n          if (isError(event.originalError) && !event.originalError.stack) {\n            event.addMetadata('unhandledRejection handler', {\n              [Object.prototype.toString.call(event.originalError)]: {\n                name: event.originalError.name,\n                message: event.originalError.message,\n                code: event.originalError.code\n              }\n            })\n          }\n        })\n      }\n      if ('addEventListener' in win) {\n        win.addEventListener('unhandledrejection', listener)\n      } else {\n        win.onunhandledrejection = (reason, promise) => {\n          listener({ detail: { reason, promise } })\n        }\n      }\n      _listener = listener\n    }\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    plugin.destroy = (win = window) => {\n      if (_listener) {\n        if ('addEventListener' in win) {\n          win.removeEventListener('unhandledrejection', _listener)\n        } else {\n          win.onunhandledrejection = null\n        }\n      }\n      _listener = null\n    }\n  }\n\n  return plugin\n}\n\n// The stack parser on bluebird stacks in FF get a suprious first frame:\n//\n// Error: derp\n//   b@http://localhost:5000/bluebird.html:22:24\n//   a@http://localhost:5000/bluebird.html:18:9\n//   @http://localhost:5000/bluebird.html:14:9\n//\n// results in\n//   []\n//     0: Object { file: \"Error: derp\", method: undefined, lineNumber: undefined,  }\n//     1: Object { file: \"http://localhost:5000/bluebird.html\", method: \"b\", lineNumber: 22,  }\n//     2: Object { file: \"http://localhost:5000/bluebird.html\", method: \"a\", lineNumber: 18,  }\n//     3: Object { file: \"http://localhost:5000/bluebird.html\", lineNumber: 14, columnNumber: 9,  }\n//\n// so the following reduce/accumulator function removes such frames\n//\n// Bluebird pads method names with spaces so trim that too\n// https://github.com/petkaantonov/bluebird/blob/b7f21399816d02f979fe434585334ce901dcaf44/src/debuggability.js#L568-L571\nconst fixBluebirdStacktrace = (error) => (frame) => {\n  if (frame.file === error.toString()) return\n  if (frame.method) {\n    frame.method = frame.method.replace(/^\\s+/, '')\n  }\n}\n","const name = 'Bugsnag JavaScript'\nconst version = '8.4.0'\nconst url = 'https://github.com/bugsnag/bugsnag-js'\n\nconst Client = require('@bugsnag/core/client')\nconst Event = require('@bugsnag/core/event')\nconst Session = require('@bugsnag/core/session')\nconst Breadcrumb = require('@bugsnag/core/breadcrumb')\n\nconst map = require('@bugsnag/core/lib/es-utils/map')\nconst keys = require('@bugsnag/core/lib/es-utils/keys')\nconst assign = require('@bugsnag/core/lib/es-utils/assign')\n\n// extend the base config schema with some browser-specific options\nconst schema = assign({}, require('@bugsnag/core/config').schema, require('./config'))\n\nconst pluginWindowOnerror = require('@bugsnag/plugin-window-onerror')\nconst pluginUnhandledRejection = require('@bugsnag/plugin-window-unhandled-rejection')\nconst pluginApp = require('@bugsnag/plugin-app-duration')\nconst pluginDevice = require('@bugsnag/plugin-browser-device')\nconst pluginContext = require('@bugsnag/plugin-browser-context')\nconst pluginRequest = require('@bugsnag/plugin-browser-request')\nconst pluginThrottle = require('@bugsnag/plugin-simple-throttle')\nconst pluginConsoleBreadcrumbs = require('@bugsnag/plugin-console-breadcrumbs')\nconst pluginNetworkBreadcrumbs = require('@bugsnag/plugin-network-breadcrumbs')\nconst pluginNavigationBreadcrumbs = require('@bugsnag/plugin-navigation-breadcrumbs')\nconst pluginInteractionBreadcrumbs = require('@bugsnag/plugin-interaction-breadcrumbs')\nconst pluginInlineScriptContent = require('@bugsnag/plugin-inline-script-content')\nconst pluginSession = require('@bugsnag/plugin-browser-session')\nconst pluginIp = require('@bugsnag/plugin-client-ip')\nconst pluginStripQueryString = require('@bugsnag/plugin-strip-query-string')\n\n// delivery mechanisms\nconst dXDomainRequest = require('@bugsnag/delivery-x-domain-request')\nconst dXMLHttpRequest = require('@bugsnag/delivery-xml-http-request')\n\nconst Bugsnag = {\n  _client: null,\n  createClient: (opts) => {\n    // handle very simple use case where user supplies just the api key as a string\n    if (typeof opts === 'string') opts = { apiKey: opts }\n    if (!opts) opts = {}\n\n    const internalPlugins = [\n      // add browser-specific plugins\n      pluginApp,\n      pluginDevice(),\n      pluginContext(),\n      pluginRequest(),\n      pluginThrottle,\n      pluginSession,\n      pluginIp,\n      pluginStripQueryString,\n      pluginWindowOnerror(),\n      pluginUnhandledRejection(),\n      pluginNavigationBreadcrumbs(),\n      pluginInteractionBreadcrumbs(),\n      pluginNetworkBreadcrumbs(),\n      pluginConsoleBreadcrumbs,\n\n      // this one added last to avoid wrapping functionality before bugsnag uses it\n      pluginInlineScriptContent()\n    ]\n\n    // configure a client with user supplied options\n    const bugsnag = new Client(opts, schema, internalPlugins, { name, version, url })\n\n    // set delivery based on browser capability (IE 8+9 have an XDomainRequest object)\n    bugsnag._setDelivery(window.XDomainRequest ? dXDomainRequest : dXMLHttpRequest)\n\n    bugsnag._logger.debug('Loaded!')\n    bugsnag.leaveBreadcrumb('Bugsnag loaded', {}, 'state')\n\n    return bugsnag._config.autoTrackSessions\n      ? bugsnag.startSession()\n      : bugsnag\n  },\n  start: (opts) => {\n    if (Bugsnag._client) {\n      Bugsnag._client._logger.warn('Bugsnag.start() was called more than once. Ignoring.')\n      return Bugsnag._client\n    }\n    Bugsnag._client = Bugsnag.createClient(opts)\n    return Bugsnag._client\n  },\n  isStarted: () => {\n    return Bugsnag._client != null\n  }\n}\n\nmap(['resetEventCount'].concat(keys(Client.prototype)), (m) => {\n  if (/^_/.test(m)) return\n  Bugsnag[m] = function () {\n    if (!Bugsnag._client) return console.log(`Bugsnag.${m}() was called before Bugsnag.start()`)\n    Bugsnag._client._depth += 1\n    const ret = Bugsnag._client[m].apply(Bugsnag._client, arguments)\n    Bugsnag._client._depth -= 1\n    return ret\n  }\n})\n\nmodule.exports = Bugsnag\n\nmodule.exports.Client = Client\nmodule.exports.Event = Event\nmodule.exports.Session = Session\nmodule.exports.Breadcrumb = Breadcrumb\n\n// Export a \"default\" property for compatibility with ESM imports\nmodule.exports.default = Bugsnag\n","/*\n * Sets the default context to be the current URL\n */\nmodule.exports = (win = window) => ({\n  load: (client) => {\n    client.addOnError(event => {\n      if (event.context !== undefined) return\n      event.context = win.location.pathname\n    }, true)\n  }\n})\n","const assign = require('@bugsnag/core/lib/es-utils/assign')\n\n/*\n * Sets the event request: { url } to be the current href\n */\nmodule.exports = (win = window) => ({\n  load: (client) => {\n    client.addOnError(event => {\n      if (event.request && event.request.url) return\n      event.request = assign({}, event.request, { url: win.location.href })\n    }, true)\n  }\n})\n","\nreturn _$notifier_11;\n\n});\n"]}