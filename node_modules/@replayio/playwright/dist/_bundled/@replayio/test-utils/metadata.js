'use strict';

var getReplayPath = require('../../@replay-cli/shared/getReplayPath.js');
var logger = require('../../@replay-cli/shared/logger.js');
var fs = require('fs');
var logging = require('./logging.js');

function getMetadataFilePath(base, workerIndex = 0) {
  return process.env.RECORD_REPLAY_METADATA_FILE || getReplayPath.getReplayPath(`${base.toUpperCase()}_METADATA_${workerIndex}`);
}
function initMetadataFile(path) {
  try {
    if (!fs.existsSync(path)) {
      fs.writeFileSync(path, "{}");
    }
    return path;
  } catch (error) {
    logging.warn(`Failed to initialize metadata file${path ? ` at ${path}` : ""}`, error);
    logger.logError("InitMetadataFile:Failed", {
      path,
      error
    });
  }
  return void 0;
}

exports.getMetadataFilePath = getMetadataFilePath;
exports.initMetadataFile = initMetadataFile;
