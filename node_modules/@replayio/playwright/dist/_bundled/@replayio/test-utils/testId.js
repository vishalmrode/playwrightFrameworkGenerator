'use strict';

var sha1 = require('sha-1');

function _interopDefault (e) { return e && e.__esModule ? e : { default: e }; }

var sha1__default = /*#__PURE__*/_interopDefault(sha1);

function buildTestId(sourcePath, test) {
  const id = generateOpaqueId(
    [sourcePath, test.id, ...test.source.scope, test.source.title].join("-")
  );
  return id;
}
const gIdCache = /* @__PURE__ */ new Map();
function generateOpaqueId(contents) {
  if (gIdCache.has(contents)) {
    return gIdCache.get(contents);
  }
  let id;
  if ("window" in globalThis) {
    id = sha1__default.default(contents);
  } else {
    id = require("crypto").createHash("sha1").update(contents).digest("hex");
  }
  gIdCache.set(contents, id);
  return id;
}

exports.buildTestId = buildTestId;
exports.generateOpaqueId = generateOpaqueId;
