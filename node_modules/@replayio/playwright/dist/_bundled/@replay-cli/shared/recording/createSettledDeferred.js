'use strict';

var createDeferred = require('../async/createDeferred.js');
var logger = require('../logger.js');

function createSettledDeferred(data, task) {
  const deferred = createDeferred.createDeferred(data);
  task().then(
    () => {
      deferred.resolve(true);
    },
    (error) => {
      logger.logDebug("Deferred action failed", { data, error });
      deferred.resolve(false);
    }
  );
  return deferred;
}

exports.createSettledDeferred = createSettledDeferred;
