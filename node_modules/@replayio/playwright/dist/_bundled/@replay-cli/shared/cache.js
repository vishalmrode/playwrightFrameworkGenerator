'use strict';

var fsExtra = require('fs-extra');

function readFromCache(path) {
  if (fsExtra.existsSync(path)) {
    try {
      const text = fsExtra.readFileSync(path, { encoding: "utf-8" });
      return JSON.parse(text);
    } catch (error) {
    }
  }
}
function writeToCache(path, value) {
  if (value) {
    const data = JSON.stringify(
      {
        "// WARNING": "This file contains sensitive information; do not share!",
        ...value
      },
      null,
      2
    );
    fsExtra.ensureFileSync(path);
    fsExtra.writeFileSync(path, data, { encoding: "utf-8" });
  } else {
    fsExtra.removeSync(path);
  }
}

exports.readFromCache = readFromCache;
exports.writeToCache = writeToCache;
